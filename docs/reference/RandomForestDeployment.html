<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Deploy a production-ready predictive RandomForest model — RandomForestDeployment • healthcareai</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">healthcareai</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/site_only/fake_vignette.html">fake vignette</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Deploy a production-ready predictive RandomForest model</h1>
    </div>

    
    <p>This step allows one to</p><ul>
<li><p>Load a saved model from <code><a href='RandomForestDevelopment.html'>RandomForestDevelopment</a></code></p></li>
<li><p>Run the model against test data to generate predictions</p></li>
<li><p>Push these predictions to SQL Server</p></li>
<li><p>Identify factors that could benefit outcomes (see final examples)</p></li>
</ul>
    

    <pre class="usage"><span class='fu'>RandomForestDeployment</span>(<span class='no'>type</span>, <span class='no'>df</span>, <span class='no'>grainCol</span>, <span class='no'>predictedCol</span>, <span class='no'>impute</span>, <span class='no'>debug</span>, <span class='no'>cores</span>, <span class='no'>modelName</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>type</th>
      <td><p>The type of model (either 'regression' or 'classification')</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>Dataframe whose columns are used for new predictions. Data structure should match development as 
much as possible. Number of columns, names, types, grain, and predicted must be the same.</p></td>
    </tr>
    <tr>
      <th>grainCol</th>
      <td><p>The dataframe's column that has IDs pertaining to the grain</p></td>
    </tr>
    <tr>
      <th>predictedCol</th>
      <td><p>Column that you want to predict.</p></td>
    </tr>
    <tr>
      <th>impute</th>
      <td><p>For training df, set all-column imputation to T or F.
If T, this uses values calculated in development.
F leads to removal of rows containing NULLs and is not recommended.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>Provides the user extended output to the console, in order</p></td>
    </tr>
    <tr>
      <th>cores</th>
      <td><p>Number of cores you'd like to use.  Defaults to 2.</p></td>
    </tr>
    <tr>
      <th>modelName</th>
      <td><p>Optional string. Can specify the model name. If used, you must load the same one in the deploy step.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>An object of class <code>R6ClassGenerator</code> of length 24.</p>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
    <p>The above describes params for initializing a new randomForestDeployment class with 
<code>$new()</code>. Individual methods are documented below.</p>
    
    <h2 class="hasAnchor" id="-code-new-code-"><a class="anchor" href="#-code-new-code-"></a>&lt;code&gt;$new()&lt;/code&gt;</h2>

    
    <p>Initializes a new random forest deployment class using the 
parameters saved in <code>p</code>, documented above. This method loads, cleans, and prepares data for
generating predictions. 
<em>Usage:</em> <code>$new(p)</code></p>
    
    <h2 class="hasAnchor" id="-code-deploy-code-"><a class="anchor" href="#-code-deploy-code-"></a>&lt;code&gt;$deploy()&lt;/code&gt;</h2>

    
    <p>Generate new predictions, calculate top factors, and prepare the output dataframe. 
<em>Usage:</em> <code>$deploy()</code></p>
    
    <h2 class="hasAnchor" id="-code-gettopfactors-code-"><a class="anchor" href="#-code-gettopfactors-code-"></a>&lt;code&gt;$getTopFactors()&lt;/code&gt;</h2>

    
    <p>Return the grain, all top factors, and their weights. 
<em>Usage:</em> <code>$getTopFactors(numberOfFactors = NA, includeWeights = FALSE)</code> 
Params: 
  - <code>numberOfFactors:</code> returns the top <code>n</code> factors. Defaults to all factors. 
  - <code>includeWeights:</code> If <code>TRUE</code>, returns weights associated with each factor.</p>
    
    <h2 class="hasAnchor" id="-code-getoutdf-code-"><a class="anchor" href="#-code-getoutdf-code-"></a>&lt;code&gt;$getOutDf()&lt;/code&gt;</h2>

    
    <p>Returns the output dataframe. 
<em>Usage:</em> <code>$getOutDf()</code></p>
    
    <h2 class="hasAnchor" id="-code-getprocessvariablesdf-code-"><a class="anchor" href="#-code-getprocessvariablesdf-code-"></a>&lt;code&gt;$getProcessVariablesDf()&lt;/code&gt;</h2>

    
    <p>Builds and returns a dataframe with information about the modifiable process 
variables. 
<em>Usage:</em> <code>$getProcessVariablesDf(modifiableVariables, 
variableLevels = NULL, grainColumnValues = NULL, smallerBetter = TRUE, 
repeatedFactors = FALSE, numTopFactors = 3)</code> 
Params: 
  - <code>modifiableVariables</code> A vector of names of categorical variables.
  - <code>variableLevels</code> A list of variable values indexed by 
  modifiable variable names. This allows one to use numeric variables by 
  specifying baselines and to restrict categorical variables by limiting 
  which factors can be recommended.
  - <code>grainColumnIDs</code> A vector of grain column IDs. If <code>NULL</code>, the 
  whole deployment dataframe will be used.
  - <code>smallerBetter</code> A boolean determining whether or not lower 
  predictions/probabilities are more desirable. 
  - <code>repeatedFactors</code> A boolean determining whether or not a single 
  modifiable factor can be listed several times. 
  - <code>numTopFactors</code> The number of modifiable process variables to 
  nclude in each row.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='healthcareai.html'>healthcareai</a></code>
    <code><a href='writeData.html'>writeData</a></code>
    <code><a href='selectData.html'>selectData</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>#### Classification Example using csv data ####</span>
<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='co'># setwd('C:/Yourscriptlocation/Useforwardslashes') # Uncomment if using csv</span>

<span class='co'># Can delete this line in your work</span>
<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                       <span class='st'>"HCRDiabetesClinical.csv"</span>,
                       <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Only one ID column (ie, PatientEncounterID) is needed remove this column</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run RandomForest</span>
<span class='no'>RandomForest</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>RandomForest</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.92 
#&gt; Ideal cutoff is 0.17, yielding TPR of 0.90 and FPR of 0.16 
#&gt; 95% CI AU_ROC: (0.87 , 0.98) 
#&gt; 
#&gt; Area under the PR curve is: 0.72 
#&gt; Ideal cutoff is 0.33, yielding Precision of 0.71 and Recall of 0.73 
#&gt; 
#&gt; ranger variable importance
#&gt; 
#&gt;               Overall
#&gt; SystolicBPNBR  100.00
#&gt; A1CNBR          98.62
#&gt; LDLNBR          78.07
#&gt; GenderFLG        0.00</div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_RF.rda
#&gt; - rmodel_info_RF.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.15.324.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'>
<span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()
<span class='fu'>head</span>(<span class='no'>dfOut</span>)</div><div class='output co'>#&gt;   BindingID BindingNM         LastLoadDTS PatientEncounterID PredictedProbNBR
#&gt; 1         0         R 2017-10-24 14:57:15                951       0.07873529
#&gt; 2         0         R 2017-10-24 14:57:15                952       0.05457830
#&gt; 3         0         R 2017-10-24 14:57:15                953       0.06903380
#&gt; 4         0         R 2017-10-24 14:57:15                954       0.82796786
#&gt; 5         0         R 2017-10-24 14:57:15                955       0.96491442
#&gt; 6         0         R 2017-10-24 14:57:15                956       0.85083961
#&gt;   Factor1TXT    Factor2TXT  Factor3TXT
#&gt; 1     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 2     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 3     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 4     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 5     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 6     A1CNBR SystolicBPNBR GenderFLG.M</div><div class='input'><span class='co'># Write to CSV (or JSON, MySQL, etc) using plain R syntax</span>
<span class='co'># write.csv(dfOut,'path/predictionsfile.csv')</span>

<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.983   0.031   0.924 </div><div class='input'>
</div><div class='input'><span class='co'>#### Classification example using SQL Server data ####</span>
<span class='co'># This example requires you to first create a table in SQL Server</span>
<span class='co'># If you prefer to not use SAMD, execute this in SSMS to create output table:</span>
<span class='co'># CREATE TABLE dbo.HCRDeployClassificationBASE(</span>
<span class='co'>#   BindingID float, BindingNM varchar(255), LastLoadDTS datetime2,</span>
<span class='co'>#   PatientEncounterID int, &lt;--change to match inputID</span>
<span class='co'>#   PredictedProbNBR decimal(38, 2),</span>
<span class='co'>#   Factor1TXT varchar(255), Factor2TXT varchar(255), Factor3TXT varchar(255)</span>
<span class='co'># )</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='no'>connection.string</span> <span class='kw'>&lt;-</span> <span class='st'>"
driver={SQL Server};
server=localhost;
database=SAM;
trusted_connection=true
"</span>

<span class='no'>query</span> <span class='kw'>&lt;-</span> <span class='st'>"
SELECT
[PatientEncounterID] --Only need one ID column for random forest
,[SystolicBPNBR]
,[LDLNBR]
,[A1CNBR]
,[GenderFLG]
,[ThirtyDayReadmitFLG]
FROM [SAM].[dbo].[HCRDiabetesClinical]
"</span>

<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='selectData.html'>selectData</a></span>(<span class='no'>connection.string</span>, <span class='no'>query</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run RandomForest</span>
<span class='no'>RandomForest</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>RandomForest</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.92 
#&gt; Ideal cutoff is 0.17, yielding TPR of 0.90 and FPR of 0.16 
#&gt; 95% CI AU_ROC: (0.87 , 0.98) 
#&gt; 
#&gt; Area under the PR curve is: 0.72 
#&gt; Ideal cutoff is 0.33, yielding Precision of 0.71 and Recall of 0.73 
#&gt; 
#&gt; ranger variable importance
#&gt; 
#&gt;               Overall
#&gt; SystolicBPNBR  100.00
#&gt; A1CNBR          98.62
#&gt; LDLNBR          78.07
#&gt; GenderFLG        0.00</div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_RF.rda
#&gt; - rmodel_info_RF.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.16.283.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>MSSQLConnectionString</span> <span class='kw'>=</span> <span class='no'>connection.string</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployClassificationBASE'</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.955   0.022   0.867 </div><div class='input'>
</div><div class='input'><span class='co'>#### Regression Example using SQL Server data ####</span>
<span class='co'># This example requires you to first create a table in SQL Server</span>
<span class='co'># If you prefer to not use SAMD, execute this in SSMS to create output table:</span>
<span class='co'># CREATE TABLE dbo.HCRDeployRegressionBASE(</span>
<span class='co'>#   BindingID float, BindingNM varchar(255), LastLoadDTS datetime2,</span>
<span class='co'>#   PatientEncounterID int, &lt;--change to match inputID</span>
<span class='co'>#   PredictedValueNBR decimal(38, 2),</span>
<span class='co'>#   Factor1TXT varchar(255), Factor2TXT varchar(255), Factor3TXT varchar(255)</span>
<span class='co'># )</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='no'>connection.string</span> <span class='kw'>&lt;-</span> <span class='st'>"
driver={SQL Server};
server=localhost;
database=SAM;
trusted_connection=true
"</span>

<span class='no'>query</span> <span class='kw'>&lt;-</span> <span class='st'>"
SELECT
[PatientEncounterID] --Only need one ID column for random forest
,[SystolicBPNBR]
,[LDLNBR]
,[A1CNBR]
,[GenderFLG]
,[ThirtyDayReadmitFLG]
FROM [SAM].[dbo].[HCRDiabetesClinical]
"</span>

<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='selectData.html'>selectData</a></span>(<span class='no'>connection.string</span>, <span class='no'>query</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run Random Forest</span>
<span class='no'>RandomForest</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>RandomForest</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; RMSE: 1.04541034 
#&gt; MAE: 0.87361167 
#&gt; ranger variable importance
#&gt; 
#&gt;                     Overall
#&gt; ThirtyDayReadmitFLG  100.00
#&gt; LDLNBR                92.48
#&gt; SystolicBPNBR         89.16
#&gt; GenderFLG              0.00</div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='no'>dfDeploy</span>$<span class='no'>A1CNBR</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># You won't know the response in production</span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  5 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_RF.rda
#&gt; - rmodel_info_RF.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.17.083.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>MSSQLConnectionString</span> <span class='kw'>=</span> <span class='no'>connection.string</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployRegressionBASE'</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.739   0.021   0.719 </div><div class='input'>
<span class='co'>#' #### Classification example pulling from CSV and writing to SQLite ####</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='co'># Can delete these system.file lines in your work</span>
<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                       <span class='st'>"HCRDiabetesClinical.csv"</span>,
                       <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='no'>sqliteFile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                          <span class='st'>"unit-test.sqlite"</span>,
                          <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Read in CSV; replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Only one ID column (ie, PatientEncounterID) is needed remove this column</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run Random Forest</span>
<span class='no'>RandomForest</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>RandomForest</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.92 
#&gt; Ideal cutoff is 0.17, yielding TPR of 0.90 and FPR of 0.16 
#&gt; 95% CI AU_ROC: (0.87 , 0.98) 
#&gt; 
#&gt; Area under the PR curve is: 0.72 
#&gt; Ideal cutoff is 0.33, yielding Precision of 0.71 and Recall of 0.73 
#&gt; 
#&gt; ranger variable importance
#&gt; 
#&gt;               Overall
#&gt; SystolicBPNBR  100.00
#&gt; A1CNBR          98.62
#&gt; LDLNBR          78.07
#&gt; GenderFLG        0.00</div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_RF.rda
#&gt; - rmodel_info_RF.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.18.039.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>SQLiteFileName</span> <span class='kw'>=</span> <span class='no'>sqliteFile</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployClassificationBASE'</span>)</div><div class='output co'>#&gt; 50 rows were inserted into the SQLite table HCRDeployClassificationBASE</div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.947   0.024   0.858 </div><div class='input'>
<span class='co'>#### Regression example pulling from CSV and writing to SQLite ####</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='co'># Can delete these system.file lines in your work</span>
<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                       <span class='st'>"HCRDiabetesClinical.csv"</span>,
                       <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='no'>sqliteFile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                          <span class='st'>"unit-test.sqlite"</span>,
                          <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Read in CSV; replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Only one ID column (ie, PatientEncounterID) is needed remove this column</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run Random Forest</span>
<span class='no'>RandomForest</span><span class='kw'>&lt;-</span> <span class='no'>RandomForestDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>RandomForest</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; RMSE: 1.04541034 
#&gt; MAE: 0.87361167 
#&gt; ranger variable importance
#&gt; 
#&gt;                     Overall
#&gt; ThirtyDayReadmitFLG  100.00
#&gt; LDLNBR                92.48
#&gt; SystolicBPNBR         89.16
#&gt; GenderFLG              0.00</div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='no'>dfDeploy</span>$<span class='no'>A1CNBR</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># You won't know the response in production</span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  5 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_RF.rda
#&gt; - rmodel_info_RF.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.18.779.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>SQLiteFileName</span> <span class='kw'>=</span> <span class='no'>sqliteFile</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployRegressionBASE'</span>)</div><div class='output co'>#&gt; 50 rows were inserted into the SQLite table HCRDeployRegressionBASE</div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.750   0.022   0.734 </div><div class='input'>
<span class='co'>#### Example Get Recommendations from Deployed Model: getProcessVariablesDf####</span>
<span class='co'># This example shows how to use the getProcessVariableDf() function, using a</span>
<span class='co'># model similar to the one built in Classification Example using csv data. </span>
<span class='co'># The main difference is that we use a data set where systolic blood pressure </span>
<span class='co'># is a categorical variable.</span>

<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                      <span class='st'>"HCRDiabetesClinical.csv"</span>,
                      <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Remove extra ID</span>

<span class='co'># Convert systolic blood pressure from a numeric variable to a categorical </span>
<span class='co'># variable with 5 categories: normal, pre-hypertension, stage 1 hypertension,</span>
<span class='co'># stage 2 hypertension, and hypertensive crisis</span>
<span class='no'>df</span>$<span class='no'>SystolicBP</span> <span class='kw'>&lt;-</span> <span class='fu'>ifelse</span>(<span class='no'>df</span>$<span class='no'>SystolicBPNBR</span> <span class='kw'>&lt;</span> <span class='fl'>140</span>,
                        <span class='fu'>ifelse</span>(<span class='no'>df</span>$<span class='no'>SystolicBPNBR</span> <span class='kw'>&lt;</span> <span class='fl'>120</span>,
                               <span class='st'>"Normal"</span>,
                               <span class='st'>"Pre-hypertensive"</span>),
                        <span class='fu'>ifelse</span>(<span class='no'>df</span>$<span class='no'>SystolicBPNBR</span> <span class='kw'>&lt;</span> <span class='fl'>160</span>,
                               <span class='st'>"Stage_1"</span>,
                               <span class='fu'>ifelse</span>(<span class='no'>df</span>$<span class='no'>SystolicBP</span> <span class='kw'>&lt;</span> <span class='fl'>180</span>, <span class='st'>"Stage_2"</span>, <span class='st'>"Crisis"</span>)))
<span class='no'>df</span>$<span class='no'>SystolicBPNBR</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## Develop and Deploy the model</span>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>RandomForest</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>RandomForest</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.91 
#&gt; Ideal cutoff is 0.22, yielding TPR of 0.83 and FPR of 0.14 
#&gt; 95% CI AU_ROC: (0.85 , 0.96) 
#&gt; 
#&gt; Area under the PR curve is: 0.67 
#&gt; Ideal cutoff is 0.38, yielding Precision of 0.76 and Recall of 0.63 
#&gt; 
#&gt; ranger variable importance
#&gt; 
#&gt;            Overall
#&gt; A1CNBR      100.00
#&gt; LDLNBR       95.88
#&gt; SystolicBP   48.99
#&gt; GenderFLG     0.00</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>RandomForestDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_RF.rda
#&gt; - rmodel_info_RF.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.19.618.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'>
<span class='co'>## Get Recommendations using getProcessVariablesDf</span>

<span class='co'># Categorical variables can simply be listed as modifiableVariables and all</span>
<span class='co'># factors levels will be used for comparison purposes. The dataframe </span>
<span class='co'># generated from the code below will consider all possible blood pressure</span>
<span class='co'># categories.</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"SystolicBP"</span>))</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951      0.031947765 SystolicBP Pre-hypertensive
#&gt; 2                 952      0.043234639 SystolicBP           Normal
#&gt; 3                 953      0.049542386 SystolicBP           Normal
#&gt; 4                 954      0.908688181 SystolicBP          Stage_2
#&gt; 5                 955      0.948234787 SystolicBP          Stage_2
#&gt; 6                 956      0.908688181 SystolicBP          Stage_2
#&gt; 7                 957      0.762054287 SystolicBP          Stage_2
#&gt; 8                 958      0.874786262 SystolicBP          Stage_2
#&gt; 9                 959      0.914658330 SystolicBP          Stage_2
#&gt; 10                960      0.948234787 SystolicBP          Stage_2
#&gt; 11                961      0.428800253 SystolicBP          Stage_1
#&gt; 12                962      0.892829275 SystolicBP          Stage_2
#&gt; 13                963      0.938704009 SystolicBP          Stage_2
#&gt; 14                964      0.429382659 SystolicBP          Stage_1
#&gt; 15                965      0.004689073 SystolicBP Pre-hypertensive
#&gt; 16                966      0.027840304 SystolicBP          Stage_1
#&gt; 17                967      0.024570025 SystolicBP           Normal
#&gt; 18                968      0.028464272 SystolicBP           Crisis
#&gt; 19                969      0.103069407 SystolicBP Pre-hypertensive
#&gt; 20                970      0.331806147 SystolicBP Pre-hypertensive
#&gt; 21                971      0.012347928 SystolicBP          Stage_1
#&gt; 22                972      0.331806147 SystolicBP Pre-hypertensive
#&gt; 23                973      0.142522238 SystolicBP          Stage_2
#&gt; 24                974      0.056585881 SystolicBP          Stage_1
#&gt; 25                975      0.195935502 SystolicBP Pre-hypertensive
#&gt; 26                976      0.219374737 SystolicBP           Normal
#&gt; 27                977      0.203996997 SystolicBP           Normal
#&gt; 28                978      0.300676833 SystolicBP          Stage_1
#&gt; 29                979      0.029532587 SystolicBP Pre-hypertensive
#&gt; 30                980      0.214897125 SystolicBP           Normal
#&gt; 31                981      0.043034522 SystolicBP Pre-hypertensive
#&gt; 32                982      0.056062636 SystolicBP Pre-hypertensive
#&gt; 33                983      0.016427478 SystolicBP Pre-hypertensive
#&gt; 34                984      0.014775026 SystolicBP Pre-hypertensive
#&gt; 35                985      0.198384755 SystolicBP Pre-hypertensive
#&gt; 36                986      0.026310345 SystolicBP Pre-hypertensive
#&gt; 37                987      0.150656359 SystolicBP Pre-hypertensive
#&gt; 38                988      0.117699551 SystolicBP Pre-hypertensive
#&gt; 39                989      0.041738068 SystolicBP Pre-hypertensive
#&gt; 40                990      0.102064579 SystolicBP Pre-hypertensive
#&gt; 41                991      0.151827678 SystolicBP Pre-hypertensive
#&gt; 42                992      0.056762239 SystolicBP           Normal
#&gt; 43                993      0.382574656 SystolicBP Pre-hypertensive
#&gt; 44                994      0.003852186 SystolicBP           Normal
#&gt; 45                995      0.077187023 SystolicBP          Stage_2
#&gt; 46                996      0.038102683 SystolicBP          Stage_2
#&gt; 47                997      0.117315171 SystolicBP          Stage_1
#&gt; 48                998      0.024863701 SystolicBP Pre-hypertensive
#&gt; 49                999      0.063620315 SystolicBP Pre-hypertensive
#&gt; 50               1000      0.192034191 SystolicBP           Normal
#&gt;     Modify1AltValue Modify1AltPrediction Modify1Delta
#&gt; 1            Crisis          0.001794598 -0.030153167
#&gt; 2            Normal          0.043234639  0.000000000
#&gt; 3            Normal          0.049542386  0.000000000
#&gt; 4            Normal          0.085180881 -0.823507300
#&gt; 5            Normal          0.132973842 -0.815260944
#&gt; 6            Normal          0.086602345 -0.822085836
#&gt; 7            Normal          0.165780218 -0.596274068
#&gt; 8            Normal          0.095006752 -0.779779510
#&gt; 9            Normal          0.101979823 -0.812678507
#&gt; 10           Normal          0.132973842 -0.815260944
#&gt; 11           Normal          0.162186904 -0.266613349
#&gt; 12           Normal          0.085011274 -0.807818000
#&gt; 13           Normal          0.130636324 -0.808067685
#&gt; 14           Normal          0.164427684 -0.264954974
#&gt; 15 Pre-hypertensive          0.004689073  0.000000000
#&gt; 16          Stage_2          0.018544001 -0.009296303
#&gt; 17 Pre-hypertensive          0.015227308 -0.009342717
#&gt; 18           Crisis          0.028464272  0.000000000
#&gt; 19          Stage_1          0.062981424 -0.040087982
#&gt; 20           Crisis          0.035927270 -0.295878877
#&gt; 21          Stage_1          0.012347928  0.000000000
#&gt; 22           Crisis          0.035927270 -0.295878877
#&gt; 23           Crisis          0.020462614 -0.122059624
#&gt; 24          Stage_2          0.026442550 -0.030143331
#&gt; 25 Pre-hypertensive          0.195935502  0.000000000
#&gt; 26          Stage_1          0.056482682 -0.162892055
#&gt; 27 Pre-hypertensive          0.106274687 -0.097722310
#&gt; 28 Pre-hypertensive          0.117551000 -0.183125833
#&gt; 29 Pre-hypertensive          0.029532587  0.000000000
#&gt; 30          Stage_1          0.052005070 -0.162892055
#&gt; 31 Pre-hypertensive          0.043034522  0.000000000
#&gt; 32 Pre-hypertensive          0.056062636  0.000000000
#&gt; 33 Pre-hypertensive          0.016427478  0.000000000
#&gt; 34 Pre-hypertensive          0.014775026  0.000000000
#&gt; 35 Pre-hypertensive          0.198384755  0.000000000
#&gt; 36 Pre-hypertensive          0.026310345  0.000000000
#&gt; 37          Stage_2          0.028361704 -0.122294655
#&gt; 38          Stage_2          0.010404026 -0.107295525
#&gt; 39          Stage_2          0.013596397 -0.028141671
#&gt; 40 Pre-hypertensive          0.102064579  0.000000000
#&gt; 41           Crisis          0.023866777 -0.127960901
#&gt; 42           Crisis          0.017675511 -0.039086728
#&gt; 43           Crisis          0.010601206 -0.371973450
#&gt; 44           Normal          0.003852186  0.000000000
#&gt; 45           Normal          0.005583752 -0.071603272
#&gt; 46           Normal          0.003326020 -0.034776663
#&gt; 47          Stage_2          0.079974493 -0.037340678
#&gt; 48          Stage_1          0.004121220 -0.020742481
#&gt; 49          Stage_2          0.018361921 -0.045258394
#&gt; 50          Stage_2          0.070727409 -0.121306781</div><div class='input'>
<span class='co'># By default, the function returns recommendations for all rows, but we can </span>
<span class='co'># restrict to specific rows using the grainColumnIDs parameter</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"SystolicBP"</span>),
                         <span class='kw'>grainColumnIDs</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>954</span>, <span class='fl'>965</span>, <span class='fl'>996</span>))</div><div class='output co'>#&gt;   PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                954      0.908688181 SystolicBP          Stage_2
#&gt; 2                965      0.004689073 SystolicBP Pre-hypertensive
#&gt; 3                996      0.038102683 SystolicBP          Stage_2
#&gt;    Modify1AltValue Modify1AltPrediction Modify1Delta
#&gt; 1           Normal          0.085180881  -0.82350730
#&gt; 2 Pre-hypertensive          0.004689073   0.00000000
#&gt; 3           Normal          0.003326020  -0.03477666</div><div class='input'>
<span class='co'># The variableLevels parameter can be used to limit which factor levels are</span>
<span class='co'># considered (for categorical variables). The dataframe generated from the </span>
<span class='co'># code below will only make comparisons with normal BP and pre-hypertensive</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"SystolicBP"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>SystolicBP</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Normal"</span>,
                                                              <span class='st'>"Pre-hypertensive"</span>)))</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951      0.031947765 SystolicBP Pre-hypertensive
#&gt; 2                 952      0.043234639 SystolicBP           Normal
#&gt; 3                 953      0.049542386 SystolicBP           Normal
#&gt; 4                 954      0.908688181 SystolicBP          Stage_2
#&gt; 5                 955      0.948234787 SystolicBP          Stage_2
#&gt; 6                 956      0.908688181 SystolicBP          Stage_2
#&gt; 7                 957      0.762054287 SystolicBP          Stage_2
#&gt; 8                 958      0.874786262 SystolicBP          Stage_2
#&gt; 9                 959      0.914658330 SystolicBP          Stage_2
#&gt; 10                960      0.948234787 SystolicBP          Stage_2
#&gt; 11                961      0.428800253 SystolicBP          Stage_1
#&gt; 12                962      0.892829275 SystolicBP          Stage_2
#&gt; 13                963      0.938704009 SystolicBP          Stage_2
#&gt; 14                964      0.429382659 SystolicBP          Stage_1
#&gt; 15                965      0.004689073 SystolicBP Pre-hypertensive
#&gt; 16                966      0.027840304 SystolicBP          Stage_1
#&gt; 17                967      0.024570025 SystolicBP           Normal
#&gt; 18                968      0.028464272 SystolicBP           Crisis
#&gt; 19                969      0.103069407 SystolicBP Pre-hypertensive
#&gt; 20                970      0.331806147 SystolicBP Pre-hypertensive
#&gt; 21                971      0.012347928 SystolicBP          Stage_1
#&gt; 22                972      0.331806147 SystolicBP Pre-hypertensive
#&gt; 23                973      0.142522238 SystolicBP          Stage_2
#&gt; 24                974      0.056585881 SystolicBP          Stage_1
#&gt; 25                975      0.195935502 SystolicBP Pre-hypertensive
#&gt; 26                976      0.219374737 SystolicBP           Normal
#&gt; 27                977      0.203996997 SystolicBP           Normal
#&gt; 28                978      0.300676833 SystolicBP          Stage_1
#&gt; 29                979      0.029532587 SystolicBP Pre-hypertensive
#&gt; 30                980      0.214897125 SystolicBP           Normal
#&gt; 31                981      0.043034522 SystolicBP Pre-hypertensive
#&gt; 32                982      0.056062636 SystolicBP Pre-hypertensive
#&gt; 33                983      0.016427478 SystolicBP Pre-hypertensive
#&gt; 34                984      0.014775026 SystolicBP Pre-hypertensive
#&gt; 35                985      0.198384755 SystolicBP Pre-hypertensive
#&gt; 36                986      0.026310345 SystolicBP Pre-hypertensive
#&gt; 37                987      0.150656359 SystolicBP Pre-hypertensive
#&gt; 38                988      0.117699551 SystolicBP Pre-hypertensive
#&gt; 39                989      0.041738068 SystolicBP Pre-hypertensive
#&gt; 40                990      0.102064579 SystolicBP Pre-hypertensive
#&gt; 41                991      0.151827678 SystolicBP Pre-hypertensive
#&gt; 42                992      0.056762239 SystolicBP           Normal
#&gt; 43                993      0.382574656 SystolicBP Pre-hypertensive
#&gt; 44                994      0.003852186 SystolicBP           Normal
#&gt; 45                995      0.077187023 SystolicBP          Stage_2
#&gt; 46                996      0.038102683 SystolicBP          Stage_2
#&gt; 47                997      0.117315171 SystolicBP          Stage_1
#&gt; 48                998      0.024863701 SystolicBP Pre-hypertensive
#&gt; 49                999      0.063620315 SystolicBP Pre-hypertensive
#&gt; 50               1000      0.192034191 SystolicBP           Normal
#&gt;     Modify1AltValue Modify1AltPrediction Modify1Delta
#&gt; 1  Pre-hypertensive          0.031947765  0.000000000
#&gt; 2            Normal          0.043234639  0.000000000
#&gt; 3            Normal          0.049542386  0.000000000
#&gt; 4            Normal          0.085180881 -0.823507300
#&gt; 5            Normal          0.132973842 -0.815260944
#&gt; 6            Normal          0.086602345 -0.822085836
#&gt; 7            Normal          0.165780218 -0.596274068
#&gt; 8            Normal          0.095006752 -0.779779510
#&gt; 9            Normal          0.101979823 -0.812678507
#&gt; 10           Normal          0.132973842 -0.815260944
#&gt; 11           Normal          0.162186904 -0.266613349
#&gt; 12           Normal          0.085011274 -0.807818000
#&gt; 13           Normal          0.130636324 -0.808067685
#&gt; 14           Normal          0.164427684 -0.264954974
#&gt; 15 Pre-hypertensive          0.004689073  0.000000000
#&gt; 16 Pre-hypertensive          0.021719003 -0.006121301
#&gt; 17 Pre-hypertensive          0.015227308 -0.009342717
#&gt; 18 Pre-hypertensive          0.066875228  0.038410956
#&gt; 19 Pre-hypertensive          0.103069407  0.000000000
#&gt; 20           Normal          0.215917126 -0.115889021
#&gt; 21           Normal          0.114647831  0.102299903
#&gt; 22           Normal          0.215917126 -0.115889021
#&gt; 23           Normal          0.121089828 -0.021432410
#&gt; 24 Pre-hypertensive          0.059521578  0.002935697
#&gt; 25 Pre-hypertensive          0.195935502  0.000000000
#&gt; 26 Pre-hypertensive          0.130402142 -0.088972596
#&gt; 27 Pre-hypertensive          0.106274687 -0.097722310
#&gt; 28 Pre-hypertensive          0.117551000 -0.183125833
#&gt; 29 Pre-hypertensive          0.029532587  0.000000000
#&gt; 30 Pre-hypertensive          0.125924530 -0.088972596
#&gt; 31 Pre-hypertensive          0.043034522  0.000000000
#&gt; 32 Pre-hypertensive          0.056062636  0.000000000
#&gt; 33 Pre-hypertensive          0.016427478  0.000000000
#&gt; 34 Pre-hypertensive          0.014775026  0.000000000
#&gt; 35 Pre-hypertensive          0.198384755  0.000000000
#&gt; 36 Pre-hypertensive          0.026310345  0.000000000
#&gt; 37 Pre-hypertensive          0.150656359  0.000000000
#&gt; 38           Normal          0.100015112 -0.017684438
#&gt; 39           Normal          0.035008301 -0.006729767
#&gt; 40 Pre-hypertensive          0.102064579  0.000000000
#&gt; 41           Normal          0.069947880 -0.081879799
#&gt; 42           Normal          0.056762239  0.000000000
#&gt; 43           Normal          0.211195651 -0.171379005
#&gt; 44           Normal          0.003852186  0.000000000
#&gt; 45           Normal          0.005583752 -0.071603272
#&gt; 46           Normal          0.003326020 -0.034776663
#&gt; 47 Pre-hypertensive          0.185324788  0.068009617
#&gt; 48 Pre-hypertensive          0.024863701  0.000000000
#&gt; 49 Pre-hypertensive          0.063620315  0.000000000
#&gt; 50 Pre-hypertensive          0.151391287 -0.040642903</div><div class='input'>
<span class='co'># The variableLevels parameter can also be used to allow recommendations for </span>
<span class='co'># numeric variables, by providing specific target values of the numeric </span>
<span class='co'># variable to make comparisons to. In the code below, the predictions will be </span>
<span class='co'># compared to those for an A1C of 5.6</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.6</span>)))</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951      0.031947765     A1CNBR              6.4
#&gt; 2                 952      0.043234639     A1CNBR                6
#&gt; 3                 953      0.049542386     A1CNBR                6
#&gt; 4                 954      0.908688181     A1CNBR                8
#&gt; 5                 955      0.948234787     A1CNBR                8
#&gt; 6                 956      0.908688181     A1CNBR                8
#&gt; 7                 957      0.762054287     A1CNBR                8
#&gt; 8                 958      0.874786262     A1CNBR                8
#&gt; 9                 959      0.914658330     A1CNBR                8
#&gt; 10                960      0.948234787     A1CNBR                8
#&gt; 11                961      0.428800253     A1CNBR                8
#&gt; 12                962      0.892829275     A1CNBR                8
#&gt; 13                963      0.938704009     A1CNBR                8
#&gt; 14                964      0.429382659     A1CNBR                8
#&gt; 15                965      0.004689073     A1CNBR              4.8
#&gt; 16                966      0.027840304     A1CNBR              5.6
#&gt; 17                967      0.024570025     A1CNBR                4
#&gt; 18                968      0.028464272     A1CNBR                7
#&gt; 19                969      0.103069407     A1CNBR 6.20587639311044
#&gt; 20                970      0.331806147     A1CNBR                7
#&gt; 21                971      0.012347928     A1CNBR                7
#&gt; 22                972      0.331806147     A1CNBR                7
#&gt; 23                973      0.142522238     A1CNBR                7
#&gt; 24                974      0.056585881     A1CNBR                6
#&gt; 25                975      0.195935502     A1CNBR                8
#&gt; 26                976      0.219374737     A1CNBR                7
#&gt; 27                977      0.203996997     A1CNBR              7.2
#&gt; 28                978      0.300676833     A1CNBR                8
#&gt; 29                979      0.029532587     A1CNBR              7.6
#&gt; 30                980      0.214897125     A1CNBR                7
#&gt; 31                981      0.043034522     A1CNBR              7.7
#&gt; 32                982      0.056062636     A1CNBR              7.8
#&gt; 33                983      0.016427478     A1CNBR              7.4
#&gt; 34                984      0.014775026     A1CNBR              7.5
#&gt; 35                985      0.198384755     A1CNBR              7.3
#&gt; 36                986      0.026310345     A1CNBR              6.3
#&gt; 37                987      0.150656359     A1CNBR              5.7
#&gt; 38                988      0.117699551     A1CNBR                5
#&gt; 39                989      0.041738068     A1CNBR              5.2
#&gt; 40                990      0.102064579     A1CNBR                8
#&gt; 41                991      0.151827678     A1CNBR              6.3
#&gt; 42                992      0.056762239     A1CNBR                4
#&gt; 43                993      0.382574656     A1CNBR                7
#&gt; 44                994      0.003852186     A1CNBR                5
#&gt; 45                995      0.077187023     A1CNBR              4.8
#&gt; 46                996      0.038102683     A1CNBR                5
#&gt; 47                997      0.117315171     A1CNBR              4.6
#&gt; 48                998      0.024863701     A1CNBR              4.4
#&gt; 49                999      0.063620315     A1CNBR              4.5
#&gt; 50               1000      0.192034191     A1CNBR                4
#&gt;    Modify1AltValue Modify1AltPrediction  Modify1Delta
#&gt; 1              5.6           0.06001971  0.0280719419
#&gt; 2              5.6           0.07573681  0.0325021717
#&gt; 3              5.6           0.09531156  0.0457691700
#&gt; 4              5.6           0.09178796 -0.8169002173
#&gt; 5              5.6           0.05918108 -0.8890537079
#&gt; 6              5.6           0.08944255 -0.8192456331
#&gt; 7              5.6           0.12331125 -0.6387430391
#&gt; 8              5.6           0.07891187 -0.7958743941
#&gt; 9              5.6           0.09724283 -0.8174154981
#&gt; 10             5.6           0.05918108 -0.8890537079
#&gt; 11             5.6           0.05192405 -0.3768762045
#&gt; 12             5.6           0.07306346 -0.8197658104
#&gt; 13             5.6           0.05918108 -0.8795229305
#&gt; 14             5.6           0.05441161 -0.3749710477
#&gt; 15             5.6           0.02171900  0.0170299297
#&gt; 16             5.6           0.02784030  0.0000000000
#&gt; 17             5.6           0.03282241  0.0082523888
#&gt; 18             5.6           0.04849364  0.0200293709
#&gt; 19             5.6           0.10267455 -0.0003948591
#&gt; 20             5.6           0.14182018 -0.1899859713
#&gt; 21             5.6           0.08136382  0.0690158925
#&gt; 22             5.6           0.14182018 -0.1899859713
#&gt; 23             5.6           0.09178796 -0.0507342746
#&gt; 24             5.6           0.09822886  0.0416429756
#&gt; 25             5.6           0.01818613 -0.1777493681
#&gt; 26             5.6           0.06366241 -0.1557123311
#&gt; 27             5.6           0.11624078 -0.0877562131
#&gt; 28             5.6           0.03173395 -0.2689428824
#&gt; 29             5.6           0.09093760  0.0614050099
#&gt; 30             5.6           0.06614997 -0.1487471570
#&gt; 31             5.6           0.10572872  0.0626941989
#&gt; 32             5.6           0.09641418  0.0403515471
#&gt; 33             5.6           0.02433629  0.0079088073
#&gt; 34             5.6           0.05412563  0.0393505994
#&gt; 35             5.6           0.05603740 -0.1423473524
#&gt; 36             5.6           0.08596247  0.0596521282
#&gt; 37             5.6           0.20542813  0.0547717760
#&gt; 38             5.6           0.20105855  0.0833589987
#&gt; 39             5.6           0.13170095  0.0899628840
#&gt; 40             5.6           0.03028042 -0.0717841545
#&gt; 41             5.6           0.11727820 -0.0345494748
#&gt; 42             5.6           0.05501700 -0.0017452420
#&gt; 43             5.6           0.05933976 -0.3232348993
#&gt; 44             5.6           0.08689925  0.0830470663
#&gt; 45             5.6           0.08184429  0.0046572692
#&gt; 46             5.6           0.04663542  0.0085327332
#&gt; 47             5.6           0.03063522 -0.0866799522
#&gt; 48             5.6           0.08596247  0.0610987720
#&gt; 49             5.6           0.08841055  0.0247902353
#&gt; 50             5.6           0.22890045  0.0368662570</div><div class='input'>
<span class='co'># The repeatedFactors parameter allows one to get multiple recommendations  </span>
<span class='co'># for the same variable. For example, reducing A1C to 5.0 might most improve</span>
<span class='co'># a patient's risk, but reducing A1C to 5.5 is likely to also reduce the risk</span>
<span class='co'># and that change might be more impactful than altering the patient's blood</span>
<span class='co'># pressure. When repeatedFactors is TRUE, both those results will</span>
<span class='co'># be included. If repeatedFactors were FALSE, only the most beneficial</span>
<span class='co'># value of A1C would be included.</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"SystolicBP"</span>, <span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>SystolicBP</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Normal"</span>,
                                                              <span class='st'>"Pre-hypertensive"</span>),
                                               <span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.0</span>, <span class='fl'>5.5</span>, <span class='fl'>6</span>, <span class='fl'>6.5</span>)),
                         <span class='kw'>repeatedFactors</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951      0.031947765     A1CNBR              6.4
#&gt; 2                 952      0.043234639     A1CNBR                6
#&gt; 3                 953      0.049542386     A1CNBR                6
#&gt; 4                 954      0.908688181     A1CNBR                8
#&gt; 5                 955      0.948234787     A1CNBR                8
#&gt; 6                 956      0.908688181     A1CNBR                8
#&gt; 7                 957      0.762054287     A1CNBR                8
#&gt; 8                 958      0.874786262     A1CNBR                8
#&gt; 9                 959      0.914658330     A1CNBR                8
#&gt; 10                960      0.948234787     A1CNBR                8
#&gt; 11                961      0.428800253     A1CNBR                8
#&gt; 12                962      0.892829275     A1CNBR                8
#&gt; 13                963      0.938704009     A1CNBR                8
#&gt; 14                964      0.429382659     A1CNBR                8
#&gt; 15                965      0.004689073     A1CNBR              4.8
#&gt; 16                966      0.027840304     A1CNBR              5.6
#&gt; 17                967      0.024570025     A1CNBR                4
#&gt; 18                968      0.028464272     A1CNBR                7
#&gt; 19                969      0.103069407     A1CNBR 6.20587639311044
#&gt; 20                970      0.331806147     A1CNBR                7
#&gt; 21                971      0.012347928     A1CNBR                7
#&gt; 22                972      0.331806147     A1CNBR                7
#&gt; 23                973      0.142522238     A1CNBR                7
#&gt; 24                974      0.056585881     A1CNBR                6
#&gt; 25                975      0.195935502     A1CNBR                8
#&gt; 26                976      0.219374737     A1CNBR                7
#&gt; 27                977      0.203996997     A1CNBR              7.2
#&gt; 28                978      0.300676833     A1CNBR                8
#&gt; 29                979      0.029532587 SystolicBP Pre-hypertensive
#&gt; 30                980      0.214897125     A1CNBR                7
#&gt; 31                981      0.043034522     A1CNBR              7.7
#&gt; 32                982      0.056062636     A1CNBR              7.8
#&gt; 33                983      0.016427478     A1CNBR              7.4
#&gt; 34                984      0.014775026 SystolicBP Pre-hypertensive
#&gt; 35                985      0.198384755     A1CNBR              7.3
#&gt; 36                986      0.026310345     A1CNBR              6.3
#&gt; 37                987      0.150656359     A1CNBR              5.7
#&gt; 38                988      0.117699551 SystolicBP Pre-hypertensive
#&gt; 39                989      0.041738068 SystolicBP Pre-hypertensive
#&gt; 40                990      0.102064579     A1CNBR                8
#&gt; 41                991      0.151827678     A1CNBR              6.3
#&gt; 42                992      0.056762239     A1CNBR                4
#&gt; 43                993      0.382574656     A1CNBR                7
#&gt; 44                994      0.003852186 SystolicBP           Normal
#&gt; 45                995      0.077187023 SystolicBP          Stage_2
#&gt; 46                996      0.038102683 SystolicBP          Stage_2
#&gt; 47                997      0.117315171     A1CNBR              4.6
#&gt; 48                998      0.024863701     A1CNBR              4.4
#&gt; 49                999      0.063620315     A1CNBR              4.5
#&gt; 50               1000      0.192034191     A1CNBR                4
#&gt;     Modify1AltValue Modify1AltPrediction  Modify1Delta Modify2TXT
#&gt; 1                 6          0.012412201 -0.0195355639     A1CNBR
#&gt; 2                 5          0.040760897 -0.0024737424     A1CNBR
#&gt; 3               6.5          0.039598060 -0.0099443260 SystolicBP
#&gt; 4                 5          0.053749799 -0.8549383815     A1CNBR
#&gt; 5                 5          0.030429813 -0.9178049733     A1CNBR
#&gt; 6                 5          0.049982919 -0.8587052614     A1CNBR
#&gt; 7                 5          0.093414914 -0.6686393727     A1CNBR
#&gt; 8                 5          0.044427364 -0.8303588979     A1CNBR
#&gt; 9                 5          0.056888866 -0.8577694642     A1CNBR
#&gt; 10                5          0.030429813 -0.9178049733     A1CNBR
#&gt; 11                5          0.018557153 -0.4102431001     A1CNBR
#&gt; 12                5          0.041658799 -0.8511704753     A1CNBR
#&gt; 13                5          0.030429813 -0.9082741958     A1CNBR
#&gt; 14                5          0.021044715 -0.4083379434     A1CNBR
#&gt; 15                5          0.004136281 -0.0005527916 SystolicBP
#&gt; 16              6.5          0.008992317 -0.0188479866     A1CNBR
#&gt; 17                5          0.003409953 -0.0211600727     A1CNBR
#&gt; 18              6.5          0.040817737  0.0123534647     A1CNBR
#&gt; 19                6          0.044827193 -0.0582422138     A1CNBR
#&gt; 20                5          0.083591119 -0.2482150280     A1CNBR
#&gt; 21              6.5          0.024838317  0.0124903885     A1CNBR
#&gt; 22                5          0.083591119 -0.2482150280     A1CNBR
#&gt; 23                5          0.053749799 -0.0887724387     A1CNBR
#&gt; 24              6.5          0.041753298 -0.0148325831     A1CNBR
#&gt; 25              5.5          0.004311065 -0.1916244372     A1CNBR
#&gt; 26                5          0.011356475 -0.2080182618     A1CNBR
#&gt; 27                5          0.043130147 -0.1608668504     A1CNBR
#&gt; 28              5.5          0.002984839 -0.2976919940     A1CNBR
#&gt; 29 Pre-hypertensive          0.029532587  0.0000000000     A1CNBR
#&gt; 30                5          0.013844037 -0.2010530876     A1CNBR
#&gt; 31              6.5          0.026563777 -0.0164707453     A1CNBR
#&gt; 32              6.5          0.028012881 -0.0280497550     A1CNBR
#&gt; 33              5.5          0.006812792 -0.0096146864     A1CNBR
#&gt; 34 Pre-hypertensive          0.014775026  0.0000000000     A1CNBR
#&gt; 35              5.5          0.029700832 -0.1686839235     A1CNBR
#&gt; 36              5.5          0.009637747 -0.0166725974     A1CNBR
#&gt; 37                5          0.063208676 -0.0874476822     A1CNBR
#&gt; 38           Normal          0.100015112 -0.0176844385     A1CNBR
#&gt; 39           Normal          0.035008301 -0.0067297672 SystolicBP
#&gt; 40              5.5          0.014746980 -0.0873175984     A1CNBR
#&gt; 41                5          0.061821002 -0.0900066766 SystolicBP
#&gt; 42                5          0.002359649 -0.0544025902     A1CNBR
#&gt; 43                5          0.027285742 -0.3552889149     A1CNBR
#&gt; 44           Normal          0.003852186  0.0000000000     A1CNBR
#&gt; 45           Normal          0.005583752 -0.0716032719 SystolicBP
#&gt; 46           Normal          0.003326020 -0.0347766633 SystolicBP
#&gt; 47              6.5          0.011267770 -0.1060474007     A1CNBR
#&gt; 48              5.5          0.009637747 -0.0152259536     A1CNBR
#&gt; 49              5.5          0.014218021 -0.0494022941     A1CNBR
#&gt; 50                5          0.090382719 -0.1016514718     A1CNBR
#&gt;      Modify2Current  Modify2AltValue Modify2AltPrediction  Modify2Delta
#&gt; 1               6.4              5.5          0.015180411 -1.676735e-02
#&gt; 2                 6              6.5          0.043151720 -8.291874e-05
#&gt; 3            Normal           Normal          0.049542386  0.000000e+00
#&gt; 4                 8              5.5          0.064649844 -8.440383e-01
#&gt; 5                 8              5.5          0.042988233 -9.052466e-01
#&gt; 6                 8              5.5          0.062304429 -8.463838e-01
#&gt; 7                 8              6.5          0.104584370 -6.574699e-01
#&gt; 8                 8              5.5          0.056748873 -8.180374e-01
#&gt; 9                 8              5.5          0.075079837 -8.395785e-01
#&gt; 10                8              5.5          0.042988233 -9.052466e-01
#&gt; 11                8              5.5          0.034463731 -3.943365e-01
#&gt; 12                8              5.5          0.052558844 -8.402704e-01
#&gt; 13                8              5.5          0.042988233 -8.957158e-01
#&gt; 14                8              5.5          0.036951293 -3.924314e-01
#&gt; 15 Pre-hypertensive Pre-hypertensive          0.004689073  0.000000e+00
#&gt; 16              5.6                5          0.020032087 -7.808217e-03
#&gt; 17                4              5.5          0.009597270 -1.497276e-02
#&gt; 18                7              5.5          0.044489852  1.602558e-02
#&gt; 19 6.20587639311044              6.5          0.047238183 -5.583122e-02
#&gt; 20                7              5.5          0.096435986 -2.353702e-01
#&gt; 21                7                5          0.032642744  2.029482e-02
#&gt; 22                7              5.5          0.096435986 -2.353702e-01
#&gt; 23                7              5.5          0.064649844 -7.787239e-02
#&gt; 24                6                6          0.056585881  0.000000e+00
#&gt; 25                8                6          0.005898366 -1.900371e-01
#&gt; 26                7                6          0.034739560 -1.846352e-01
#&gt; 27              7.2              5.5          0.072214882 -1.317821e-01
#&gt; 28                8                6          0.004785360 -2.958915e-01
#&gt; 29              7.6              6.5          0.040924513  1.139193e-02
#&gt; 30                7                6          0.037227122 -1.776700e-01
#&gt; 31              7.7                6          0.030081477 -1.295305e-02
#&gt; 32              7.8                6          0.028663961 -2.739867e-02
#&gt; 33              7.4                6          0.008117775 -8.309703e-03
#&gt; 34              7.5              5.5          0.024661833  9.886807e-03
#&gt; 35              7.3                5          0.034399560 -1.639852e-01
#&gt; 36              6.3                5          0.011791660 -1.451868e-02
#&gt; 37              5.7              5.5          0.075081850 -7.557451e-02
#&gt; 38                5              5.5          0.117535688 -1.638632e-04
#&gt; 39 Pre-hypertensive Pre-hypertensive          0.041738068  0.000000e+00
#&gt; 40                8                5          0.015635396 -8.642918e-02
#&gt; 41 Pre-hypertensive           Normal          0.069947880 -8.187980e-02
#&gt; 42                4                6          0.012286206 -4.447603e-02
#&gt; 43                7              5.5          0.028999396 -3.535753e-01
#&gt; 44                5                5          0.003852186  0.000000e+00
#&gt; 45          Stage_2 Pre-hypertensive          0.006535324 -7.065170e-02
#&gt; 46          Stage_2 Pre-hypertensive          0.004204455 -3.389823e-02
#&gt; 47              4.6              5.5          0.017865733 -9.944944e-02
#&gt; 48              4.4                5          0.011791660 -1.307204e-02
#&gt; 49              4.5              6.5          0.015567173 -4.805314e-02
#&gt; 50                4              5.5          0.124055624 -6.797857e-02
#&gt;    Modify3TXT   Modify3Current  Modify3AltValue Modify3AltPrediction
#&gt; 1      A1CNBR              6.4                5          0.020163433
#&gt; 2  SystolicBP           Normal           Normal          0.043234639
#&gt; 3      A1CNBR                6                6          0.049542386
#&gt; 4      A1CNBR                8                6          0.068945346
#&gt; 5      A1CNBR                8                6          0.053068783
#&gt; 6      A1CNBR                8                6          0.064112368
#&gt; 7      A1CNBR                8              5.5          0.115872252
#&gt; 8      A1CNBR                8                6          0.065107393
#&gt; 9      A1CNBR                8                6          0.086838026
#&gt; 10     A1CNBR                8                6          0.053068783
#&gt; 11     A1CNBR                8                6          0.050881821
#&gt; 12     A1CNBR                8                6          0.059788748
#&gt; 13     A1CNBR                8                6          0.053068783
#&gt; 14     A1CNBR                8                6          0.053369383
#&gt; 15     A1CNBR              4.8              5.5          0.006090795
#&gt; 16     A1CNBR              5.6              5.5          0.020626373
#&gt; 17 SystolicBP           Normal Pre-hypertensive          0.015227308
#&gt; 18 SystolicBP           Crisis Pre-hypertensive          0.066875228
#&gt; 19     A1CNBR 6.20587639311044              5.5          0.057006064
#&gt; 20     A1CNBR                7                6          0.148785047
#&gt; 21     A1CNBR                7              5.5          0.043280428
#&gt; 22     A1CNBR                7                6          0.148785047
#&gt; 23     A1CNBR                7                6          0.068945346
#&gt; 24 SystolicBP          Stage_1 Pre-hypertensive          0.059521578
#&gt; 25     A1CNBR                8                5          0.006443261
#&gt; 26     A1CNBR                7              5.5          0.036686176
#&gt; 27 SystolicBP           Normal Pre-hypertensive          0.106274687
#&gt; 28     A1CNBR                8              6.5          0.004864330
#&gt; 29     A1CNBR              7.6              5.5          0.052625191
#&gt; 30     A1CNBR                7              5.5          0.039173738
#&gt; 31 SystolicBP Pre-hypertensive Pre-hypertensive          0.043034522
#&gt; 32     A1CNBR              7.8              5.5          0.045438900
#&gt; 33     A1CNBR              7.4                5          0.013335732
#&gt; 34     A1CNBR              7.5                6          0.034096801
#&gt; 35     A1CNBR              7.3              6.5          0.075113085
#&gt; 36     A1CNBR              6.3              6.5          0.015567173
#&gt; 37     A1CNBR              5.7              6.5          0.123447902
#&gt; 38 SystolicBP Pre-hypertensive Pre-hypertensive          0.117699551
#&gt; 39     A1CNBR              5.2                5          0.042288886
#&gt; 40     A1CNBR                8                6          0.017992657
#&gt; 41     A1CNBR              6.3              5.5          0.072012469
#&gt; 42     A1CNBR                4              5.5          0.016313688
#&gt; 43     A1CNBR                7                6          0.093661889
#&gt; 44 SystolicBP           Normal Pre-hypertensive          0.022650995
#&gt; 45     A1CNBR              4.8              6.5          0.063661218
#&gt; 46     A1CNBR                5              5.5          0.037127401
#&gt; 47     A1CNBR              4.6                6          0.027656067
#&gt; 48     A1CNBR              4.4              6.5          0.015567173
#&gt; 49     A1CNBR              4.5                5          0.015661201
#&gt; 50 SystolicBP           Normal Pre-hypertensive          0.151391287
#&gt;     Modify3Delta
#&gt; 1  -0.0117843323
#&gt; 2   0.0000000000
#&gt; 3   0.0000000000
#&gt; 4  -0.8397428344
#&gt; 5  -0.8951660036
#&gt; 6  -0.8445758124
#&gt; 7  -0.6461820346
#&gt; 8  -0.8096788686
#&gt; 9  -0.8278203042
#&gt; 10 -0.8951660036
#&gt; 11 -0.3779184320
#&gt; 12 -0.8330405262
#&gt; 13 -0.8856352261
#&gt; 14 -0.3760132752
#&gt; 15  0.0014017216
#&gt; 16 -0.0072139303
#&gt; 17 -0.0093427170
#&gt; 18  0.0384109564
#&gt; 19 -0.0460633421
#&gt; 20 -0.1830211009
#&gt; 21  0.0309324999
#&gt; 22 -0.1830211009
#&gt; 23 -0.0735768917
#&gt; 24  0.0029356969
#&gt; 25 -0.1894922410
#&gt; 26 -0.1826885611
#&gt; 27 -0.0977223096
#&gt; 28 -0.2958125026
#&gt; 29  0.0230926037
#&gt; 30 -0.1757233869
#&gt; 31  0.0000000000
#&gt; 32 -0.0106237353
#&gt; 33 -0.0030917455
#&gt; 34  0.0193217753
#&gt; 35 -0.1232716701
#&gt; 36 -0.0107431722
#&gt; 37 -0.0272084568
#&gt; 38  0.0000000000
#&gt; 39  0.0005508173
#&gt; 40 -0.0840719220
#&gt; 41 -0.0798152097
#&gt; 42 -0.0404485509
#&gt; 43 -0.2889127675
#&gt; 44  0.0187988089
#&gt; 45 -0.0135258053
#&gt; 46 -0.0009752823
#&gt; 47 -0.0896591041
#&gt; 48 -0.0092965283
#&gt; 49 -0.0479591132
#&gt; 50 -0.0406429031</div><div class='input'>
<span class='co'># The numTopFactors parameter allows one to set the maximum number of </span>
<span class='co'># recommendations to display (with the default being 3)</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"SystolicBP"</span>, <span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>SystolicBP</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Normal"</span>,
                                                              <span class='st'>"Pre-hypertensive"</span>),
                                               <span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.0</span>, <span class='fl'>5.5</span>, <span class='fl'>6</span>, <span class='fl'>6.5</span>)),
                         <span class='kw'>repeatedFactors</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                         <span class='kw'>numTopFactors</span> <span class='kw'>=</span> <span class='fl'>5</span>)</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951      0.031947765     A1CNBR              6.4
#&gt; 2                 952      0.043234639     A1CNBR                6
#&gt; 3                 953      0.049542386     A1CNBR                6
#&gt; 4                 954      0.908688181     A1CNBR                8
#&gt; 5                 955      0.948234787     A1CNBR                8
#&gt; 6                 956      0.908688181     A1CNBR                8
#&gt; 7                 957      0.762054287     A1CNBR                8
#&gt; 8                 958      0.874786262     A1CNBR                8
#&gt; 9                 959      0.914658330     A1CNBR                8
#&gt; 10                960      0.948234787     A1CNBR                8
#&gt; 11                961      0.428800253     A1CNBR                8
#&gt; 12                962      0.892829275     A1CNBR                8
#&gt; 13                963      0.938704009     A1CNBR                8
#&gt; 14                964      0.429382659     A1CNBR                8
#&gt; 15                965      0.004689073     A1CNBR              4.8
#&gt; 16                966      0.027840304     A1CNBR              5.6
#&gt; 17                967      0.024570025     A1CNBR                4
#&gt; 18                968      0.028464272     A1CNBR                7
#&gt; 19                969      0.103069407     A1CNBR 6.20587639311044
#&gt; 20                970      0.331806147     A1CNBR                7
#&gt; 21                971      0.012347928     A1CNBR                7
#&gt; 22                972      0.331806147     A1CNBR                7
#&gt; 23                973      0.142522238     A1CNBR                7
#&gt; 24                974      0.056585881     A1CNBR                6
#&gt; 25                975      0.195935502     A1CNBR                8
#&gt; 26                976      0.219374737     A1CNBR                7
#&gt; 27                977      0.203996997     A1CNBR              7.2
#&gt; 28                978      0.300676833     A1CNBR                8
#&gt; 29                979      0.029532587 SystolicBP Pre-hypertensive
#&gt; 30                980      0.214897125     A1CNBR                7
#&gt; 31                981      0.043034522     A1CNBR              7.7
#&gt; 32                982      0.056062636     A1CNBR              7.8
#&gt; 33                983      0.016427478     A1CNBR              7.4
#&gt; 34                984      0.014775026 SystolicBP Pre-hypertensive
#&gt; 35                985      0.198384755     A1CNBR              7.3
#&gt; 36                986      0.026310345     A1CNBR              6.3
#&gt; 37                987      0.150656359     A1CNBR              5.7
#&gt; 38                988      0.117699551 SystolicBP Pre-hypertensive
#&gt; 39                989      0.041738068 SystolicBP Pre-hypertensive
#&gt; 40                990      0.102064579     A1CNBR                8
#&gt; 41                991      0.151827678     A1CNBR              6.3
#&gt; 42                992      0.056762239     A1CNBR                4
#&gt; 43                993      0.382574656     A1CNBR                7
#&gt; 44                994      0.003852186 SystolicBP           Normal
#&gt; 45                995      0.077187023 SystolicBP          Stage_2
#&gt; 46                996      0.038102683 SystolicBP          Stage_2
#&gt; 47                997      0.117315171     A1CNBR              4.6
#&gt; 48                998      0.024863701     A1CNBR              4.4
#&gt; 49                999      0.063620315     A1CNBR              4.5
#&gt; 50               1000      0.192034191     A1CNBR                4
#&gt;     Modify1AltValue Modify1AltPrediction  Modify1Delta Modify2TXT
#&gt; 1                 6          0.012412201 -0.0195355639     A1CNBR
#&gt; 2                 5          0.040760897 -0.0024737424     A1CNBR
#&gt; 3               6.5          0.039598060 -0.0099443260 SystolicBP
#&gt; 4                 5          0.053749799 -0.8549383815     A1CNBR
#&gt; 5                 5          0.030429813 -0.9178049733     A1CNBR
#&gt; 6                 5          0.049982919 -0.8587052614     A1CNBR
#&gt; 7                 5          0.093414914 -0.6686393727     A1CNBR
#&gt; 8                 5          0.044427364 -0.8303588979     A1CNBR
#&gt; 9                 5          0.056888866 -0.8577694642     A1CNBR
#&gt; 10                5          0.030429813 -0.9178049733     A1CNBR
#&gt; 11                5          0.018557153 -0.4102431001     A1CNBR
#&gt; 12                5          0.041658799 -0.8511704753     A1CNBR
#&gt; 13                5          0.030429813 -0.9082741958     A1CNBR
#&gt; 14                5          0.021044715 -0.4083379434     A1CNBR
#&gt; 15                5          0.004136281 -0.0005527916 SystolicBP
#&gt; 16              6.5          0.008992317 -0.0188479866     A1CNBR
#&gt; 17                5          0.003409953 -0.0211600727     A1CNBR
#&gt; 18              6.5          0.040817737  0.0123534647     A1CNBR
#&gt; 19                6          0.044827193 -0.0582422138     A1CNBR
#&gt; 20                5          0.083591119 -0.2482150280     A1CNBR
#&gt; 21              6.5          0.024838317  0.0124903885     A1CNBR
#&gt; 22                5          0.083591119 -0.2482150280     A1CNBR
#&gt; 23                5          0.053749799 -0.0887724387     A1CNBR
#&gt; 24              6.5          0.041753298 -0.0148325831     A1CNBR
#&gt; 25              5.5          0.004311065 -0.1916244372     A1CNBR
#&gt; 26                5          0.011356475 -0.2080182618     A1CNBR
#&gt; 27                5          0.043130147 -0.1608668504     A1CNBR
#&gt; 28              5.5          0.002984839 -0.2976919940     A1CNBR
#&gt; 29 Pre-hypertensive          0.029532587  0.0000000000     A1CNBR
#&gt; 30                5          0.013844037 -0.2010530876     A1CNBR
#&gt; 31              6.5          0.026563777 -0.0164707453     A1CNBR
#&gt; 32              6.5          0.028012881 -0.0280497550     A1CNBR
#&gt; 33              5.5          0.006812792 -0.0096146864     A1CNBR
#&gt; 34 Pre-hypertensive          0.014775026  0.0000000000     A1CNBR
#&gt; 35              5.5          0.029700832 -0.1686839235     A1CNBR
#&gt; 36              5.5          0.009637747 -0.0166725974     A1CNBR
#&gt; 37                5          0.063208676 -0.0874476822     A1CNBR
#&gt; 38           Normal          0.100015112 -0.0176844385     A1CNBR
#&gt; 39           Normal          0.035008301 -0.0067297672 SystolicBP
#&gt; 40              5.5          0.014746980 -0.0873175984     A1CNBR
#&gt; 41                5          0.061821002 -0.0900066766 SystolicBP
#&gt; 42                5          0.002359649 -0.0544025902     A1CNBR
#&gt; 43                5          0.027285742 -0.3552889149     A1CNBR
#&gt; 44           Normal          0.003852186  0.0000000000     A1CNBR
#&gt; 45           Normal          0.005583752 -0.0716032719 SystolicBP
#&gt; 46           Normal          0.003326020 -0.0347766633 SystolicBP
#&gt; 47              6.5          0.011267770 -0.1060474007     A1CNBR
#&gt; 48              5.5          0.009637747 -0.0152259536     A1CNBR
#&gt; 49              5.5          0.014218021 -0.0494022941     A1CNBR
#&gt; 50                5          0.090382719 -0.1016514718     A1CNBR
#&gt;      Modify2Current  Modify2AltValue Modify2AltPrediction  Modify2Delta
#&gt; 1               6.4              5.5          0.015180411 -1.676735e-02
#&gt; 2                 6              6.5          0.043151720 -8.291874e-05
#&gt; 3            Normal           Normal          0.049542386  0.000000e+00
#&gt; 4                 8              5.5          0.064649844 -8.440383e-01
#&gt; 5                 8              5.5          0.042988233 -9.052466e-01
#&gt; 6                 8              5.5          0.062304429 -8.463838e-01
#&gt; 7                 8              6.5          0.104584370 -6.574699e-01
#&gt; 8                 8              5.5          0.056748873 -8.180374e-01
#&gt; 9                 8              5.5          0.075079837 -8.395785e-01
#&gt; 10                8              5.5          0.042988233 -9.052466e-01
#&gt; 11                8              5.5          0.034463731 -3.943365e-01
#&gt; 12                8              5.5          0.052558844 -8.402704e-01
#&gt; 13                8              5.5          0.042988233 -8.957158e-01
#&gt; 14                8              5.5          0.036951293 -3.924314e-01
#&gt; 15 Pre-hypertensive Pre-hypertensive          0.004689073  0.000000e+00
#&gt; 16              5.6                5          0.020032087 -7.808217e-03
#&gt; 17                4              5.5          0.009597270 -1.497276e-02
#&gt; 18                7              5.5          0.044489852  1.602558e-02
#&gt; 19 6.20587639311044              6.5          0.047238183 -5.583122e-02
#&gt; 20                7              5.5          0.096435986 -2.353702e-01
#&gt; 21                7                5          0.032642744  2.029482e-02
#&gt; 22                7              5.5          0.096435986 -2.353702e-01
#&gt; 23                7              5.5          0.064649844 -7.787239e-02
#&gt; 24                6                6          0.056585881  0.000000e+00
#&gt; 25                8                6          0.005898366 -1.900371e-01
#&gt; 26                7                6          0.034739560 -1.846352e-01
#&gt; 27              7.2              5.5          0.072214882 -1.317821e-01
#&gt; 28                8                6          0.004785360 -2.958915e-01
#&gt; 29              7.6              6.5          0.040924513  1.139193e-02
#&gt; 30                7                6          0.037227122 -1.776700e-01
#&gt; 31              7.7                6          0.030081477 -1.295305e-02
#&gt; 32              7.8                6          0.028663961 -2.739867e-02
#&gt; 33              7.4                6          0.008117775 -8.309703e-03
#&gt; 34              7.5              5.5          0.024661833  9.886807e-03
#&gt; 35              7.3                5          0.034399560 -1.639852e-01
#&gt; 36              6.3                5          0.011791660 -1.451868e-02
#&gt; 37              5.7              5.5          0.075081850 -7.557451e-02
#&gt; 38                5              5.5          0.117535688 -1.638632e-04
#&gt; 39 Pre-hypertensive Pre-hypertensive          0.041738068  0.000000e+00
#&gt; 40                8                5          0.015635396 -8.642918e-02
#&gt; 41 Pre-hypertensive           Normal          0.069947880 -8.187980e-02
#&gt; 42                4                6          0.012286206 -4.447603e-02
#&gt; 43                7              5.5          0.028999396 -3.535753e-01
#&gt; 44                5                5          0.003852186  0.000000e+00
#&gt; 45          Stage_2 Pre-hypertensive          0.006535324 -7.065170e-02
#&gt; 46          Stage_2 Pre-hypertensive          0.004204455 -3.389823e-02
#&gt; 47              4.6              5.5          0.017865733 -9.944944e-02
#&gt; 48              4.4                5          0.011791660 -1.307204e-02
#&gt; 49              4.5              6.5          0.015567173 -4.805314e-02
#&gt; 50                4              5.5          0.124055624 -6.797857e-02
#&gt;    Modify3TXT   Modify3Current  Modify3AltValue Modify3AltPrediction
#&gt; 1      A1CNBR              6.4                5          0.020163433
#&gt; 2  SystolicBP           Normal           Normal          0.043234639
#&gt; 3      A1CNBR                6                6          0.049542386
#&gt; 4      A1CNBR                8                6          0.068945346
#&gt; 5      A1CNBR                8                6          0.053068783
#&gt; 6      A1CNBR                8                6          0.064112368
#&gt; 7      A1CNBR                8              5.5          0.115872252
#&gt; 8      A1CNBR                8                6          0.065107393
#&gt; 9      A1CNBR                8                6          0.086838026
#&gt; 10     A1CNBR                8                6          0.053068783
#&gt; 11     A1CNBR                8                6          0.050881821
#&gt; 12     A1CNBR                8                6          0.059788748
#&gt; 13     A1CNBR                8                6          0.053068783
#&gt; 14     A1CNBR                8                6          0.053369383
#&gt; 15     A1CNBR              4.8              5.5          0.006090795
#&gt; 16     A1CNBR              5.6              5.5          0.020626373
#&gt; 17 SystolicBP           Normal Pre-hypertensive          0.015227308
#&gt; 18 SystolicBP           Crisis Pre-hypertensive          0.066875228
#&gt; 19     A1CNBR 6.20587639311044              5.5          0.057006064
#&gt; 20     A1CNBR                7                6          0.148785047
#&gt; 21     A1CNBR                7              5.5          0.043280428
#&gt; 22     A1CNBR                7                6          0.148785047
#&gt; 23     A1CNBR                7                6          0.068945346
#&gt; 24 SystolicBP          Stage_1 Pre-hypertensive          0.059521578
#&gt; 25     A1CNBR                8                5          0.006443261
#&gt; 26     A1CNBR                7              5.5          0.036686176
#&gt; 27 SystolicBP           Normal Pre-hypertensive          0.106274687
#&gt; 28     A1CNBR                8              6.5          0.004864330
#&gt; 29     A1CNBR              7.6              5.5          0.052625191
#&gt; 30     A1CNBR                7              5.5          0.039173738
#&gt; 31 SystolicBP Pre-hypertensive Pre-hypertensive          0.043034522
#&gt; 32     A1CNBR              7.8              5.5          0.045438900
#&gt; 33     A1CNBR              7.4                5          0.013335732
#&gt; 34     A1CNBR              7.5                6          0.034096801
#&gt; 35     A1CNBR              7.3              6.5          0.075113085
#&gt; 36     A1CNBR              6.3              6.5          0.015567173
#&gt; 37     A1CNBR              5.7              6.5          0.123447902
#&gt; 38 SystolicBP Pre-hypertensive Pre-hypertensive          0.117699551
#&gt; 39     A1CNBR              5.2                5          0.042288886
#&gt; 40     A1CNBR                8                6          0.017992657
#&gt; 41     A1CNBR              6.3              5.5          0.072012469
#&gt; 42     A1CNBR                4              5.5          0.016313688
#&gt; 43     A1CNBR                7                6          0.093661889
#&gt; 44 SystolicBP           Normal Pre-hypertensive          0.022650995
#&gt; 45     A1CNBR              4.8              6.5          0.063661218
#&gt; 46     A1CNBR                5              5.5          0.037127401
#&gt; 47     A1CNBR              4.6                6          0.027656067
#&gt; 48     A1CNBR              4.4              6.5          0.015567173
#&gt; 49     A1CNBR              4.5                5          0.015661201
#&gt; 50 SystolicBP           Normal Pre-hypertensive          0.151391287
#&gt;     Modify3Delta Modify4TXT   Modify4Current  Modify4AltValue
#&gt; 1  -0.0117843323 SystolicBP Pre-hypertensive Pre-hypertensive
#&gt; 2   0.0000000000     A1CNBR                6                6
#&gt; 3   0.0000000000     A1CNBR                6                5
#&gt; 4  -0.8397428344 SystolicBP          Stage_2           Normal
#&gt; 5  -0.8951660036     A1CNBR                8              6.5
#&gt; 6  -0.8445758124 SystolicBP          Stage_2           Normal
#&gt; 7  -0.6461820346     A1CNBR                8                6
#&gt; 8  -0.8096788686 SystolicBP          Stage_2           Normal
#&gt; 9  -0.8278203042 SystolicBP          Stage_2           Normal
#&gt; 10 -0.8951660036     A1CNBR                8              6.5
#&gt; 11 -0.3779184320 SystolicBP          Stage_1           Normal
#&gt; 12 -0.8330405262 SystolicBP          Stage_2           Normal
#&gt; 13 -0.8856352261     A1CNBR                8              6.5
#&gt; 14 -0.3760132752 SystolicBP          Stage_1           Normal
#&gt; 15  0.0014017216 SystolicBP Pre-hypertensive           Normal
#&gt; 16 -0.0072139303 SystolicBP          Stage_1 Pre-hypertensive
#&gt; 17 -0.0093427170 SystolicBP           Normal           Normal
#&gt; 18  0.0384109564     A1CNBR                7                5
#&gt; 19 -0.0460633421     A1CNBR 6.20587639311044                5
#&gt; 20 -0.1830211009     A1CNBR                7              6.5
#&gt; 21  0.0309324999     A1CNBR                7                6
#&gt; 22 -0.1830211009     A1CNBR                7              6.5
#&gt; 23 -0.0735768917     A1CNBR                7              6.5
#&gt; 24  0.0029356969     A1CNBR                6                5
#&gt; 25 -0.1894922410     A1CNBR                8              6.5
#&gt; 26 -0.1826885611     A1CNBR                7              6.5
#&gt; 27 -0.0977223096     A1CNBR              7.2                6
#&gt; 28 -0.2958125026     A1CNBR                8                5
#&gt; 29  0.0230926037     A1CNBR              7.6                6
#&gt; 30 -0.1757233869     A1CNBR                7              6.5
#&gt; 31  0.0000000000     A1CNBR              7.7              5.5
#&gt; 32 -0.0106237353     A1CNBR              7.8                5
#&gt; 33 -0.0030917455 SystolicBP Pre-hypertensive Pre-hypertensive
#&gt; 34  0.0193217753     A1CNBR              7.5              6.5
#&gt; 35 -0.1232716701     A1CNBR              7.3                6
#&gt; 36 -0.0107431722     A1CNBR              6.3                6
#&gt; 37 -0.0272084568 SystolicBP Pre-hypertensive Pre-hypertensive
#&gt; 38  0.0000000000     A1CNBR                5                5
#&gt; 39  0.0005508173     A1CNBR              5.2              5.5
#&gt; 40 -0.0840719220     A1CNBR                8              6.5
#&gt; 41 -0.0798152097     A1CNBR              6.3                6
#&gt; 42 -0.0404485509     A1CNBR                4              6.5
#&gt; 43 -0.2889127675 SystolicBP Pre-hypertensive           Normal
#&gt; 44  0.0187988089     A1CNBR                5              5.5
#&gt; 45 -0.0135258053     A1CNBR              4.8              5.5
#&gt; 46 -0.0009752823     A1CNBR                5                5
#&gt; 47 -0.0896591041     A1CNBR              4.6                5
#&gt; 48 -0.0092965283     A1CNBR              4.4                6
#&gt; 49 -0.0479591132     A1CNBR              4.5                6
#&gt; 50 -0.0406429031 SystolicBP           Normal           Normal
#&gt;    Modify4AltPrediction Modify4Delta Modify5TXT   Modify5Current
#&gt; 1           0.031947765  0.000000000 SystolicBP Pre-hypertensive
#&gt; 2           0.043234639  0.000000000     A1CNBR                6
#&gt; 3           0.063557627  0.014015241     A1CNBR                6
#&gt; 4           0.085180881 -0.823507300     A1CNBR                8
#&gt; 5           0.103859876 -0.844374910 SystolicBP          Stage_2
#&gt; 6           0.086602345 -0.822085836     A1CNBR                8
#&gt; 7           0.127369839 -0.634684448 SystolicBP          Stage_2
#&gt; 8           0.095006752 -0.779779510     A1CNBR                8
#&gt; 9           0.101979823 -0.812678507     A1CNBR                8
#&gt; 10          0.103859876 -0.844374910 SystolicBP          Stage_2
#&gt; 11          0.162186904 -0.266613349     A1CNBR                8
#&gt; 12          0.085011274 -0.807818000     A1CNBR                8
#&gt; 13          0.111598959 -0.827105051 SystolicBP          Stage_2
#&gt; 14          0.164427684 -0.264954974     A1CNBR                8
#&gt; 15          0.006947819  0.002258746     A1CNBR              4.8
#&gt; 16          0.021719003 -0.006121301 SystolicBP          Stage_1
#&gt; 17          0.024570025  0.000000000     A1CNBR                4
#&gt; 18          0.067967701  0.039503429     A1CNBR                7
#&gt; 19          0.060715691 -0.042353716 SystolicBP Pre-hypertensive
#&gt; 20          0.186937126 -0.144869021 SystolicBP Pre-hypertensive
#&gt; 21          0.051367159  0.039019231 SystolicBP          Stage_1
#&gt; 22          0.186937126 -0.144869021 SystolicBP Pre-hypertensive
#&gt; 23          0.099397478 -0.043124760 SystolicBP          Stage_2
#&gt; 24          0.077520099  0.020934218     A1CNBR                6
#&gt; 25          0.011741860 -0.184193642 SystolicBP Pre-hypertensive
#&gt; 26          0.068275732 -0.151099005 SystolicBP           Normal
#&gt; 27          0.118149889 -0.085847108     A1CNBR              7.2
#&gt; 28          0.005137962 -0.295538871 SystolicBP          Stage_1
#&gt; 29          0.062244077  0.032711489 SystolicBP Pre-hypertensive
#&gt; 30          0.070763294 -0.144133831 SystolicBP           Normal
#&gt; 31          0.064040338  0.021005815     A1CNBR              7.7
#&gt; 32          0.049148527 -0.006914109 SystolicBP Pre-hypertensive
#&gt; 33          0.016427478  0.000000000     A1CNBR              7.4
#&gt; 34          0.035234396  0.020459370     A1CNBR              7.5
#&gt; 35          0.077244858 -0.121139898 SystolicBP Pre-hypertensive
#&gt; 36          0.018488647 -0.007821697 SystolicBP Pre-hypertensive
#&gt; 37          0.150656359  0.000000000 SystolicBP Pre-hypertensive
#&gt; 38          0.117699551  0.000000000     A1CNBR                5
#&gt; 39          0.048150451  0.006412383     A1CNBR              5.2
#&gt; 40          0.034781424 -0.067283155 SystolicBP Pre-hypertensive
#&gt; 41          0.120918427 -0.030909251 SystolicBP Pre-hypertensive
#&gt; 42          0.021808042 -0.034954197 SystolicBP           Normal
#&gt; 43          0.211195651 -0.171379005     A1CNBR                7
#&gt; 44          0.022781350  0.018929164     A1CNBR                5
#&gt; 45          0.073994652 -0.003192371     A1CNBR              4.8
#&gt; 46          0.038102683  0.000000000     A1CNBR                5
#&gt; 47          0.037750006 -0.079565165 SystolicBP          Stage_1
#&gt; 48          0.018488647 -0.006375054 SystolicBP Pre-hypertensive
#&gt; 49          0.019199379 -0.044420935 SystolicBP Pre-hypertensive
#&gt; 50          0.192034191  0.000000000     A1CNBR                4
#&gt;     Modify5AltValue Modify5AltPrediction Modify5Delta
#&gt; 1            Normal           0.03372662  0.001778858
#&gt; 2               5.5           0.04582289  0.002588249
#&gt; 3               5.5           0.06563454  0.016092158
#&gt; 4               6.5           0.09939748 -0.809290703
#&gt; 5            Normal           0.13297384 -0.815260944
#&gt; 6               6.5           0.09406699 -0.814621193
#&gt; 7            Normal           0.16578022 -0.596274068
#&gt; 8               6.5           0.10054057 -0.774245690
#&gt; 9               6.5           0.13915145 -0.775506880
#&gt; 10           Normal           0.13297384 -0.815260944
#&gt; 11              6.5           0.19438755 -0.234412703
#&gt; 12              6.5           0.09916057 -0.793668708
#&gt; 13           Normal           0.13063632 -0.808067685
#&gt; 14              6.5           0.18881817 -0.240564484
#&gt; 15              6.5           0.01548018  0.010791102
#&gt; 16           Normal           0.03282241  0.004982111
#&gt; 17                6           0.05512163  0.030551607
#&gt; 18                6           0.07202282  0.043558550
#&gt; 19 Pre-hypertensive           0.10306941  0.000000000
#&gt; 20           Normal           0.21591713 -0.115889021
#&gt; 21           Normal           0.11464783  0.102299903
#&gt; 22           Normal           0.21591713 -0.115889021
#&gt; 23           Normal           0.12108983 -0.021432410
#&gt; 24              5.5           0.07876664  0.022180763
#&gt; 25 Pre-hypertensive           0.19593550  0.000000000
#&gt; 26 Pre-hypertensive           0.13040214 -0.088972596
#&gt; 27              6.5           0.19760725 -0.006389748
#&gt; 28 Pre-hypertensive           0.11755100 -0.183125833
#&gt; 29           Normal           0.07064255  0.041109967
#&gt; 30 Pre-hypertensive           0.12592453 -0.088972596
#&gt; 31                5           0.07023753  0.027203004
#&gt; 32 Pre-hypertensive           0.05606264  0.000000000
#&gt; 33              6.5           0.02004073  0.003613250
#&gt; 34                5           0.04428396  0.029508935
#&gt; 35 Pre-hypertensive           0.19838476  0.000000000
#&gt; 36 Pre-hypertensive           0.02631034  0.000000000
#&gt; 37           Normal           0.20387493  0.053218575
#&gt; 38                6           0.37316783  0.255468282
#&gt; 39                6           0.23755421  0.195816146
#&gt; 40 Pre-hypertensive           0.10206458  0.000000000
#&gt; 41 Pre-hypertensive           0.15182768  0.000000000
#&gt; 42           Normal           0.05676224  0.000000000
#&gt; 43              6.5           0.25781689 -0.124757766
#&gt; 44                6           0.02385337  0.020001185
#&gt; 45                5           0.08263597  0.005448946
#&gt; 46                6           0.05150178  0.013399094
#&gt; 47 Pre-hypertensive           0.18532479  0.068009617
#&gt; 48 Pre-hypertensive           0.02486370  0.000000000
#&gt; 49 Pre-hypertensive           0.06362031  0.000000000
#&gt; 50                6           0.26906022  0.077026028</div><div class='input'>
<span class='co'># If greater values of the predicted variable are preferable, setting</span>
<span class='co'># smallerBetter to FALSE will identify the factors that most increase</span>
<span class='co'># the value of the outcome variable. In this case, the deltas will be </span>
<span class='co'># positive, corresponding to an increased risk</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"SystolicBP"</span>),
                         <span class='kw'>smallerBetter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951      0.031947765 SystolicBP Pre-hypertensive
#&gt; 2                 952      0.043234639 SystolicBP           Normal
#&gt; 3                 953      0.049542386 SystolicBP           Normal
#&gt; 4                 954      0.908688181 SystolicBP          Stage_2
#&gt; 5                 955      0.948234787 SystolicBP          Stage_2
#&gt; 6                 956      0.908688181 SystolicBP          Stage_2
#&gt; 7                 957      0.762054287 SystolicBP          Stage_2
#&gt; 8                 958      0.874786262 SystolicBP          Stage_2
#&gt; 9                 959      0.914658330 SystolicBP          Stage_2
#&gt; 10                960      0.948234787 SystolicBP          Stage_2
#&gt; 11                961      0.428800253 SystolicBP          Stage_1
#&gt; 12                962      0.892829275 SystolicBP          Stage_2
#&gt; 13                963      0.938704009 SystolicBP          Stage_2
#&gt; 14                964      0.429382659 SystolicBP          Stage_1
#&gt; 15                965      0.004689073 SystolicBP Pre-hypertensive
#&gt; 16                966      0.027840304 SystolicBP          Stage_1
#&gt; 17                967      0.024570025 SystolicBP           Normal
#&gt; 18                968      0.028464272 SystolicBP           Crisis
#&gt; 19                969      0.103069407 SystolicBP Pre-hypertensive
#&gt; 20                970      0.331806147 SystolicBP Pre-hypertensive
#&gt; 21                971      0.012347928 SystolicBP          Stage_1
#&gt; 22                972      0.331806147 SystolicBP Pre-hypertensive
#&gt; 23                973      0.142522238 SystolicBP          Stage_2
#&gt; 24                974      0.056585881 SystolicBP          Stage_1
#&gt; 25                975      0.195935502 SystolicBP Pre-hypertensive
#&gt; 26                976      0.219374737 SystolicBP           Normal
#&gt; 27                977      0.203996997 SystolicBP           Normal
#&gt; 28                978      0.300676833 SystolicBP          Stage_1
#&gt; 29                979      0.029532587 SystolicBP Pre-hypertensive
#&gt; 30                980      0.214897125 SystolicBP           Normal
#&gt; 31                981      0.043034522 SystolicBP Pre-hypertensive
#&gt; 32                982      0.056062636 SystolicBP Pre-hypertensive
#&gt; 33                983      0.016427478 SystolicBP Pre-hypertensive
#&gt; 34                984      0.014775026 SystolicBP Pre-hypertensive
#&gt; 35                985      0.198384755 SystolicBP Pre-hypertensive
#&gt; 36                986      0.026310345 SystolicBP Pre-hypertensive
#&gt; 37                987      0.150656359 SystolicBP Pre-hypertensive
#&gt; 38                988      0.117699551 SystolicBP Pre-hypertensive
#&gt; 39                989      0.041738068 SystolicBP Pre-hypertensive
#&gt; 40                990      0.102064579 SystolicBP Pre-hypertensive
#&gt; 41                991      0.151827678 SystolicBP Pre-hypertensive
#&gt; 42                992      0.056762239 SystolicBP           Normal
#&gt; 43                993      0.382574656 SystolicBP Pre-hypertensive
#&gt; 44                994      0.003852186 SystolicBP           Normal
#&gt; 45                995      0.077187023 SystolicBP          Stage_2
#&gt; 46                996      0.038102683 SystolicBP          Stage_2
#&gt; 47                997      0.117315171 SystolicBP          Stage_1
#&gt; 48                998      0.024863701 SystolicBP Pre-hypertensive
#&gt; 49                999      0.063620315 SystolicBP Pre-hypertensive
#&gt; 50               1000      0.192034191 SystolicBP           Normal
#&gt;     Modify1AltValue Modify1AltPrediction Modify1Delta
#&gt; 1           Stage_2           0.16248518 0.1305374125
#&gt; 2           Stage_1           0.27748661 0.2342519752
#&gt; 3           Stage_1           0.31281592 0.2632735341
#&gt; 4           Stage_2           0.90868818 0.0000000000
#&gt; 5           Stage_2           0.94823479 0.0000000000
#&gt; 6           Stage_2           0.90868818 0.0000000000
#&gt; 7           Stage_2           0.76205429 0.0000000000
#&gt; 8           Stage_2           0.87478626 0.0000000000
#&gt; 9           Stage_2           0.91465833 0.0000000000
#&gt; 10          Stage_2           0.94823479 0.0000000000
#&gt; 11          Stage_2           0.87231072 0.4435104657
#&gt; 12          Stage_2           0.89282927 0.0000000000
#&gt; 13          Stage_2           0.93870401 0.0000000000
#&gt; 14          Stage_2           0.87040556 0.4410229035
#&gt; 15           Crisis           0.04673063 0.0420415595
#&gt; 16           Normal           0.03282241 0.0049821105
#&gt; 17           Crisis           0.10854655 0.0839765275
#&gt; 18          Stage_2           0.10307931 0.0746150350
#&gt; 19           Normal           0.21100257 0.1079331674
#&gt; 20 Pre-hypertensive           0.33180615 0.0000000000
#&gt; 21 Pre-hypertensive           0.14727352 0.1349255927
#&gt; 22 Pre-hypertensive           0.33180615 0.0000000000
#&gt; 23 Pre-hypertensive           0.15355963 0.0110373951
#&gt; 24           Crisis           0.15560803 0.0990221464
#&gt; 25           Crisis           0.80375879 0.6078232861
#&gt; 26           Crisis           0.30286846 0.0834937264
#&gt; 27          Stage_2           0.40049491 0.1964979099
#&gt; 28          Stage_2           0.68326948 0.3825926425
#&gt; 29          Stage_2           0.45779786 0.4282652708
#&gt; 30           Crisis           0.30917029 0.0942731625
#&gt; 31          Stage_2           0.52213325 0.4790987243
#&gt; 32          Stage_2           0.50982322 0.4537605881
#&gt; 33          Stage_2           0.44413206 0.4277045822
#&gt; 34          Stage_2           0.43793092 0.4231558971
#&gt; 35          Stage_2           0.69111540 0.4927306424
#&gt; 36           Normal           0.08266744 0.0563570987
#&gt; 37           Normal           0.20387493 0.0532185754
#&gt; 38           Crisis           0.11830227 0.0006027171
#&gt; 39           Crisis           0.07412583 0.0323877583
#&gt; 40           Crisis           0.72844291 0.6263783283
#&gt; 41          Stage_2           0.20703369 0.0552060141
#&gt; 42 Pre-hypertensive           0.06810129 0.0113390473
#&gt; 43 Pre-hypertensive           0.38257466 0.0000000000
#&gt; 44          Stage_2           0.06793483 0.0640826404
#&gt; 45          Stage_2           0.07718702 0.0000000000
#&gt; 46          Stage_1           0.04699684 0.0088941554
#&gt; 47           Crisis           0.64560365 0.5282884838
#&gt; 48           Crisis           0.25539034 0.2305266415
#&gt; 49           Crisis           0.30199985 0.2383795339
#&gt; 50           Normal           0.19203419 0.0000000000</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#format">Format</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#-code-new-code-">&lt;code&gt;$new()&lt;/code&gt;</a></li>

      <li><a href="#-code-deploy-code-">&lt;code&gt;$deploy()&lt;/code&gt;</a></li>

      <li><a href="#-code-gettopfactors-code-">&lt;code&gt;$getTopFactors()&lt;/code&gt;</a></li>

      <li><a href="#-code-getoutdf-code-">&lt;code&gt;$getOutDf()&lt;/code&gt;</a></li>

      <li><a href="#-code-getprocessvariablesdf-code-">&lt;code&gt;$getProcessVariablesDf()&lt;/code&gt;</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Levi Thatcher, Mike Mastanduno, Michael Levy, Taylor Miller, Taylor Larsen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
