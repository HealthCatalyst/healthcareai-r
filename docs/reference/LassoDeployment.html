<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Deploy a production-ready predictive Lasso model — LassoDeployment • healthcareai</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">healthcareai</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/site_only/fake_vignette.html">fake vignette</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Deploy a production-ready predictive Lasso model</h1>
    </div>

    
    <p>This step allows one to</p><ul>
<li><p>Load a saved model from <code><a href='LassoDevelopment.html'>LassoDevelopment</a></code></p></li>
<li><p>Run the model against test data to generate predictions</p></li>
<li><p>Push these predictions to SQL Server</p></li>
<li><p>Identify factors that could benefit outcomes (see final examples)</p></li>
</ul>
    

    <pre class="usage"><span class='fu'>LassoDeployment</span>(<span class='no'>type</span>, <span class='no'>df</span>, <span class='no'>grainCol</span>, <span class='no'>predictedCol</span>, <span class='no'>impute</span>, <span class='no'>debug</span>, <span class='no'>cores</span>, <span class='no'>modelName</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>type</th>
      <td><p>The type of model (either 'regression' or 'classification')</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>Dataframe whose columns are used for new predictions. Data structure should match development as 
much as possible. Number of columns, names, types, grain, and predicted must be the same.</p></td>
    </tr>
    <tr>
      <th>grainCol</th>
      <td><p>The dataframe's column that has IDs pertaining to the grain</p></td>
    </tr>
    <tr>
      <th>predictedCol</th>
      <td><p>Column that you want to predict.</p></td>
    </tr>
    <tr>
      <th>impute</th>
      <td><p>For training df, set all-column imputation to T or F.
If T, this uses values calculated in development.
F leads to removal of rows containing NULLs and is not recommended.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>Provides the user extended output to the console, in order
to monitor the calculations throughout. Use T or F.</p></td>
    </tr>
    <tr>
      <th>cores</th>
      <td><p>Number of cores you'd like to use. Defaults to 2.</p></td>
    </tr>
    <tr>
      <th>modelName</th>
      <td><p>Optional string. Can specify the model name. If used, you must load the same one in the deploy step.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>An object of class <code>R6ClassGenerator</code> of length 24.</p>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
    <p>The above describes params for initializing a new lassoDeployment class with 
<code>$new()</code>. Individual methods are documented below.</p>
    
    <h2 class="hasAnchor" id="-code-new-code-"><a class="anchor" href="#-code-new-code-"></a>&lt;code&gt;$new()&lt;/code&gt;</h2>

    
    <p>Initializes a new lasso deployment class using the 
parameters saved in <code>p</code>, documented above. This method loads, cleans, and prepares data for
generating predictions. 
<em>Usage:</em> <code>$new(p)</code></p>
    
    <h2 class="hasAnchor" id="-code-deploy-code-"><a class="anchor" href="#-code-deploy-code-"></a>&lt;code&gt;$deploy()&lt;/code&gt;</h2>

    
    <p>Generate new predictions, calculate top factors, and prepare the output dataframe. 
<em>Usage:</em><code>$deploy()</code></p>
    
    <h2 class="hasAnchor" id="-code-gettopfactors-code-"><a class="anchor" href="#-code-gettopfactors-code-"></a>&lt;code&gt;$getTopFactors()&lt;/code&gt;</h2>

    
    <p>Return the grain, all top factors, and their weights. 
<em>Usage:</em> <code>$getTopFactors(numberOfFactors = NA, includeWeights = FALSE)</code> 
Params: 
  - <code>numberOfFactors</code> returns the top <code>n</code> factors. Defaults to all factors. 
  - <code>includeWeights</code> If <code>TRUE</code>, returns weights associated with each factor.</p>
    
    <h2 class="hasAnchor" id="-code-getoutdf-code-"><a class="anchor" href="#-code-getoutdf-code-"></a>&lt;code&gt;$getOutDf()&lt;/code&gt;</h2>

    
    <p>Returns the output dataframe. 
<em>Usage:</em> <code>$getOutDf()</code></p>
    
    <h2 class="hasAnchor" id="-code-performnewpredictions-code-"><a class="anchor" href="#-code-performnewpredictions-code-"></a>&lt;code&gt;$performNewPredictions()&lt;/code&gt;</h2>

    
    <p>Performs predictions on new data which has gone through the necessary
preprocessing. 
<em>Usage:</em> <code>$performNewPredictions(newData)</code> 
Params: 
  - <code>newData</code> A dataframe on which the model can make predictions.</p>
    
    <h2 class="hasAnchor" id="-code-getprocessvariablesdf-code-"><a class="anchor" href="#-code-getprocessvariablesdf-code-"></a>&lt;code&gt;$getProcessVariablesDf()&lt;/code&gt;</h2>

    
    <p>Builds and returns a dataframe with information about the modifiable process 
variables. 
<em>Usage:</em> <code>$getProcessVariablesDf(modifiableVariables, 
variableLevels = NULL, grainColumnValues = NULL, smallerBetter = TRUE, 
repeatedFactors = FALSE, numTopFactors = 3)</code> 
Params: 
  - <code>modifiableVariables</code> A vector of names of categorical variables.
  - <code>variableLevels</code> A list of variable values indexed by 
  modifiable variable names. This allows one to use numeric variables by 
  specifying baselines and to restric categorical variables by limiting 
  which factors can be recommended.
  - <code>grainColumnIDs</code> A vector of grain column IDs. If <code>NULL</code>, the 
  whole deployment dataframe will be used.
  - <code>smallerBetter</code> A boolean determining whether or not lower 
  predictions/probabilities are more desirable. 
  - <code>repeatedFactors</code> A boolean determining whether or not a single 
  modifiable factor can be listed several times. 
  - <code>numTopFactors</code> The number of modifiable process variables to 
  nclude in each row.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='healthcareai.html'>healthcareai</a></code>
    <code><a href='writeData.html'>writeData</a></code>
    <code><a href='selectData.html'>selectData</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>

<span class='co'>#### Classification Example using csv data ####</span>
<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)
<span class='co'># setwd('C:/Yourscriptlocation/Useforwardslashes') # Uncomment if using csv</span>

<span class='co'># Can delete this line in your work</span>
<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                       <span class='st'>"HCRDiabetesClinical.csv"</span>,
                       <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Only one ID column (ie, PatientEncounterID) is needed remove this column</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run Lasso</span>
<span class='no'>Lasso</span><span class='kw'>&lt;-</span> <span class='no'>LassoDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>Lasso</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.77 
#&gt; Ideal cutoff is 0.17, yielding TPR of 0.83 and FPR of 0.32 
#&gt; 95% CI AU_ROC: (0.67 , 0.88) 
#&gt; 
#&gt; Area under the PR curve is: 0.30 
#&gt; Ideal cutoff is 0.18, yielding Precision of 0.43 and Recall of 0.60 
#&gt; 
#&gt; Grouped Lasso coefficients: 
#&gt;   (Intercept) SystolicBPNBR        LDLNBR        A1CNBR    GenderFLGM 
#&gt;    -3.0095923     0.0000000     0.0000000     0.2102113     0.0000000 
#&gt; Variables with non-zero coefficients:  A1CNBR </div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_lasso.rda
#&gt; - rmodel_info_lasso.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.01.579.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'>
<span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()
<span class='fu'>head</span>(<span class='no'>dfOut</span>)</div><div class='output co'>#&gt;   BindingID BindingNM         LastLoadDTS PatientEncounterID PredictedProbNBR
#&gt; 1         0         R 2017-10-24 14:57:01                951        0.1591936
#&gt; 2         0         R 2017-10-24 14:57:01                952        0.1482586
#&gt; 3         0         R 2017-10-24 14:57:01                953        0.1482586
#&gt; 4         0         R 2017-10-24 14:57:01                954        0.2095066
#&gt; 5         0         R 2017-10-24 14:57:01                955        0.2095066
#&gt; 6         0         R 2017-10-24 14:57:01                956        0.2095066
#&gt;   Factor1TXT    Factor2TXT  Factor3TXT
#&gt; 1     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 2     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 3     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 4     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 5     A1CNBR SystolicBPNBR GenderFLG.M
#&gt; 6     A1CNBR SystolicBPNBR GenderFLG.M</div><div class='input'><span class='co'># Write to CSV (or JSON, MySQL, etc) using plain R syntax</span>
<span class='co'># write.csv(dfOut,'path/predictionsfile.csv')</span>

<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   1.094   0.020   1.127 </div><div class='input'>
</div><div class='input'><span class='co'>#### Classification example using SQL Server data ####</span>
<span class='co'># This example requires you to first create a table in SQL Server</span>
<span class='co'># If you prefer to not use SAMD, execute this in SSMS to create output table:</span>
<span class='co'># CREATE TABLE dbo.HCRDeployClassificationBASE(</span>
<span class='co'>#   BindingID float, BindingNM varchar(255), LastLoadDTS datetime2,</span>
<span class='co'>#   PatientEncounterID int, &lt;--change to match inputID</span>
<span class='co'>#   PredictedProbNBR decimal(38, 2),</span>
<span class='co'>#   Factor1TXT varchar(255), Factor2TXT varchar(255), Factor3TXT varchar(255)</span>
<span class='co'># )</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='no'>connection.string</span> <span class='kw'>&lt;-</span> <span class='st'>"
driver={SQL Server};
server=localhost;
database=SAM;
trusted_connection=true
"</span>

<span class='no'>query</span> <span class='kw'>&lt;-</span> <span class='st'>"
SELECT
[PatientEncounterID] --Only need one ID column for lasso
,[SystolicBPNBR]
,[LDLNBR]
,[A1CNBR]
,[GenderFLG]
,[ThirtyDayReadmitFLG]
FROM [SAM].[dbo].[HCRDiabetesClinical]
"</span>

<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='selectData.html'>selectData</a></span>(<span class='no'>connection.string</span>, <span class='no'>query</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run Lasso</span>
<span class='no'>Lasso</span><span class='kw'>&lt;-</span> <span class='no'>LassoDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>Lasso</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.77 
#&gt; Ideal cutoff is 0.17, yielding TPR of 0.83 and FPR of 0.32 
#&gt; 95% CI AU_ROC: (0.67 , 0.88) 
#&gt; 
#&gt; Area under the PR curve is: 0.30 
#&gt; Ideal cutoff is 0.18, yielding Precision of 0.43 and Recall of 0.60 
#&gt; 
#&gt; Grouped Lasso coefficients: 
#&gt;   (Intercept) SystolicBPNBR        LDLNBR        A1CNBR    GenderFLGM 
#&gt;    -3.0095923     0.0000000     0.0000000     0.2102113     0.0000000 
#&gt; Variables with non-zero coefficients:  A1CNBR </div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_lasso.rda
#&gt; - rmodel_info_lasso.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.02.268.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>MSSQLConnectionString</span> <span class='kw'>=</span> <span class='no'>connection.string</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployClassificationBASE'</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.592   0.014   0.617 </div><div class='input'>
</div><div class='input'><span class='co'>#### Regression Example using SQL Server data ####</span>
<span class='co'># This example requires you to first create a table in SQL Server</span>
<span class='co'># If you prefer to not use SAMD, execute this in SSMS to create output table:</span>
<span class='co'># CREATE TABLE dbo.HCRDeployRegressionBASE(</span>
<span class='co'>#   BindingID float, BindingNM varchar(255), LastLoadDTS datetime2,</span>
<span class='co'>#   PatientEncounterID int, &lt;--change to match inputID</span>
<span class='co'>#   PredictedValueNBR decimal(38, 2),</span>
<span class='co'>#   Factor1TXT varchar(255), Factor2TXT varchar(255), Factor3TXT varchar(255)</span>
<span class='co'># )</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='no'>connection.string</span> <span class='kw'>&lt;-</span> <span class='st'>"
driver={SQL Server};
server=localhost;
database=SAM;
trusted_connection=true
"</span>

<span class='no'>query</span> <span class='kw'>&lt;-</span> <span class='st'>"
SELECT
[PatientEncounterID] --Only need one ID column for lasso
,[SystolicBPNBR]
,[LDLNBR]
,[A1CNBR]
,[GenderFLG]
,[ThirtyDayReadmitFLG]
FROM [SAM].[dbo].[HCRDiabetesClinical]
"</span>

<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='selectData.html'>selectData</a></span>(<span class='no'>connection.string</span>, <span class='no'>query</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run lasso</span>
<span class='no'>Lasso</span><span class='kw'>&lt;-</span> <span class='no'>LassoDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>Lasso</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; RMSE: 1.10730771 
#&gt; MAE: 0.94230545 
#&gt; Grouped Lasso coefficients: 
#&gt;          (Intercept)        SystolicBPNBR               LDLNBR 
#&gt;            6.1525356            0.0000000            0.0000000 
#&gt;           GenderFLGM ThirtyDayReadmitFLGY 
#&gt;            0.0000000            0.2798768 
#&gt; Variables with non-zero coefficients:  ThirtyDayReadmitFLG </div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_lasso.rda
#&gt; - rmodel_info_lasso.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.02.723.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>MSSQLConnectionString</span> <span class='kw'>=</span> <span class='no'>connection.string</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployRegressionBASE'</span>)</div><div class='output co'>#&gt; <span class='error'>Error: nanodbc/nanodbc.cpp:950: IM002: [unixODBC][Driver Manager]Data source name not found, and no default driver specified </span></div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.347   0.014   0.369 </div><div class='input'>
<span class='co'>#### Classification example pulling from CSV and writing to SQLite ####</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='co'># Can delete these system.file lines in your work</span>
<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                       <span class='st'>"HCRDiabetesClinical.csv"</span>,
                       <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='no'>sqliteFile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                          <span class='st'>"unit-test.sqlite"</span>,
                          <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Read in CSV; replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Only one ID column (ie, PatientEncounterID) is needed</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run lasso</span>
<span class='no'>Lasso</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>Lasso</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.77 
#&gt; Ideal cutoff is 0.17, yielding TPR of 0.83 and FPR of 0.32 
#&gt; 95% CI AU_ROC: (0.67 , 0.88) 
#&gt; 
#&gt; Area under the PR curve is: 0.30 
#&gt; Ideal cutoff is 0.18, yielding Precision of 0.43 and Recall of 0.60 
#&gt; 
#&gt; Grouped Lasso coefficients: 
#&gt;   (Intercept) SystolicBPNBR        LDLNBR        A1CNBR    GenderFLGM 
#&gt;    -3.0095923     0.0000000     0.0000000     0.2102113     0.0000000 
#&gt; Variables with non-zero coefficients:  A1CNBR </div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_lasso.rda
#&gt; - rmodel_info_lasso.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.03.546.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>SQLiteFileName</span> <span class='kw'>=</span> <span class='no'>sqliteFile</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployClassificationBASE'</span>)</div><div class='output co'>#&gt; 50 rows were inserted into the SQLite table HCRDeployClassificationBASE</div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.714   0.017   0.743 </div><div class='input'>
<span class='co'>#### Regression example pulling from CSV and writing to SQLite ####</span>

<span class='co'>## 1. Loading data and packages.</span>
<span class='no'>ptm</span> <span class='kw'>&lt;-</span> <span class='fu'>proc.time</span>()
<span class='fu'>library</span>(<span class='no'>healthcareai</span>)

<span class='co'># Can delete these system.file lines in your work</span>
<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                       <span class='st'>"HCRDiabetesClinical.csv"</span>,
                       <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='no'>sqliteFile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                          <span class='st'>"unit-test.sqlite"</span>,
                          <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Read in CSV; replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Only one ID column (ie, PatientEncounterID) is needed remove this column</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## 2. Train and save the model using DEVELOP</span>
<span class='fu'>print</span>(<span class='st'>'Historical, development data:'</span>)</div><div class='output co'>#&gt; [1] "Historical, development data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; 'data.frame':	1000 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ SystolicBPNBR      : int  167 153 170 187 188 185 189 149 155 160 ...
#&gt;  $ LDLNBR             : int  195 214 191 135 125 178 101 160 144 130 ...
#&gt;  $ A1CNBR             : num  4.2 5 4 4.4 4.3 5 4 5 6.6 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 1 1 1 1 1 1 2 ...</div><div class='input'>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='co'># Run lasso</span>
<span class='no'>Lasso</span><span class='kw'>&lt;-</span> <span class='no'>LassoDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>Lasso</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; RMSE: 1.10730771 
#&gt; MAE: 0.94230545 
#&gt; Grouped Lasso coefficients: 
#&gt;          (Intercept)        SystolicBPNBR               LDLNBR 
#&gt;            6.1525356            0.0000000            0.0000000 
#&gt;           GenderFLGM ThirtyDayReadmitFLGY 
#&gt;            0.0000000            0.2798768 
#&gt; Variables with non-zero coefficients:  ThirtyDayReadmitFLG </div><div class='input'>
<span class='co'>## 3. Load saved model and use DEPLOY to generate predictions. </span>
<span class='fu'>print</span>(<span class='st'>'Fake production data:'</span>)</div><div class='output co'>#&gt; [1] "Fake production data:"</div><div class='input'><span class='fu'>str</span>(<span class='no'>dfDeploy</span>)</div><div class='output co'>#&gt; 'data.frame':	50 obs. of  6 variables:
#&gt;  $ PatientEncounterID : int  951 952 953 954 955 956 957 958 959 960 ...
#&gt;  $ SystolicBPNBR      : int  125 112 111 166 161 165 176 163 167 161 ...
#&gt;  $ LDLNBR             : int  122 144 145 119 106 118 145 112 123 106 ...
#&gt;  $ A1CNBR             : num  6.4 6 6 8 8 8 8 8 8 8 ...
#&gt;  $ GenderFLG          : Factor w/ 2 levels "F","M": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ ThirtyDayReadmitFLG: Factor w/ 2 levels "N","Y": 1 1 1 2 2 2 2 2 2 2 ...</div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"regression"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"A1CNBR"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_lasso.rda
#&gt; - rmodel_info_lasso.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.03.895.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'><span class='no'>dfOut</span> <span class='kw'>&lt;-</span> <span class='no'>dL</span>$<span class='fu'>getOutDf</span>()

<span class='fu'><a href='writeData.html'>writeData</a></span>(<span class='kw'>SQLiteFileName</span> <span class='kw'>=</span> <span class='no'>sqliteFile</span>,
          <span class='kw'>df</span> <span class='kw'>=</span> <span class='no'>dfOut</span>,
          <span class='kw'>tableName</span> <span class='kw'>=</span> <span class='st'>'HCRDeployRegressionBASE'</span>)</div><div class='output co'>#&gt; 50 rows were inserted into the SQLite table HCRDeployRegressionBASE</div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>proc.time</span>() - <span class='no'>ptm</span>)</div><div class='output co'>#&gt;    user  system elapsed 
#&gt;   0.363   0.014   0.389 </div><div class='input'>
<span class='co'>#### Example Get Recommendations from Deployed Model ####</span>
<span class='co'># This example shows how to use the getProcessVariableDf() function, using a</span>
<span class='co'># model similar to the one built in Classification Example using csv data. </span>
<span class='co'># Because of the lasso's automatic feature selection, this example is fairly</span>
<span class='co'># limited. For a wider variety of examples, see ?RandomForestDeployment</span>

<span class='no'>csvfile</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>,
                       <span class='st'>"HCRDiabetesClinical.csv"</span>,
                       <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"healthcareai"</span>)

<span class='co'># Replace csvfile with 'path/file'</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'>read.csv</span>(<span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>csvfile</span>,
               <span class='kw'>header</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
               <span class='kw'>na.strings</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"NULL"</span>, <span class='st'>"NA"</span>, <span class='st'>""</span>))

<span class='no'>df</span>$<span class='no'>PatientID</span> <span class='kw'>&lt;-</span> <span class='kw'>NULL</span> <span class='co'># Remove extra ID</span>

<span class='co'># Save a dataframe for validation later on</span>
<span class='no'>dfDeploy</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>[<span class='fl'>951</span>:<span class='fl'>1000</span>,]

<span class='co'>## Develop and Deploy the model</span>
<span class='fu'>set.seed</span>(<span class='fl'>42</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDevelopmentParams</span>$<span class='fu'>new</span>()
<span class='no'>p</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>p</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>Lasso</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDevelopment</span>$<span class='fu'>new</span>(<span class='no'>p</span>)
<span class='no'>Lasso</span>$<span class='fu'>run</span>()</div><div class='output co'>#&gt; Area under the ROC curve is: 0.77 
#&gt; Ideal cutoff is 0.17, yielding TPR of 0.83 and FPR of 0.32 
#&gt; 95% CI AU_ROC: (0.67 , 0.88) 
#&gt; 
#&gt; Area under the PR curve is: 0.30 
#&gt; Ideal cutoff is 0.18, yielding Precision of 0.43 and Recall of 0.60 
#&gt; 
#&gt; Grouped Lasso coefficients: 
#&gt;   (Intercept) SystolicBPNBR        LDLNBR        A1CNBR    GenderFLGM 
#&gt;    -3.0095923     0.0000000     0.0000000     0.2102113     0.0000000 
#&gt; Variables with non-zero coefficients:  A1CNBR </div><div class='input'>
<span class='no'>p2</span> <span class='kw'>&lt;-</span> <span class='no'>SupervisedModelDeploymentParams</span>$<span class='fu'>new</span>()
<span class='no'>p2</span>$<span class='no'>type</span> <span class='kw'>&lt;-</span> <span class='st'>"classification"</span>
<span class='no'>p2</span>$<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>dfDeploy</span>
<span class='no'>p2</span>$<span class='no'>grainCol</span> <span class='kw'>&lt;-</span> <span class='st'>"PatientEncounterID"</span>
<span class='no'>p2</span>$<span class='no'>predictedCol</span> <span class='kw'>&lt;-</span> <span class='st'>"ThirtyDayReadmitFLG"</span>
<span class='no'>p2</span>$<span class='no'>impute</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>p2</span>$<span class='no'>debug</span> <span class='kw'>&lt;-</span> <span class='fl'>FALSE</span>
<span class='no'>p2</span>$<span class='no'>cores</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>

<span class='no'>dL</span> <span class='kw'>&lt;-</span> <span class='no'>LassoDeployment</span>$<span class='fu'>new</span>(<span class='no'>p2</span>)</div><div class='output co'>#&gt; Loading Model Info... 
#&gt; The modelName parameter was not specified. Using defaults:
#&gt; - rmodel_probability_lasso.rda
#&gt; - rmodel_info_lasso.rda
#&gt; Loading Data... </div><div class='input'><span class='no'>dL</span>$<span class='fu'>deploy</span>()</div><div class='output co'>#&gt; <span class='message'>Model metadata written to predictionMetadata_default_2017-10-24_14.57.04.457.txt</span>
#&gt; <span class='message'>WARNING: **This file may contain PHI.**</span></div><div class='input'>
<span class='co'>## Get Recommendations</span>

<span class='co'># getProcessVariablesDf only uses variables with non-zero coefficients, </span>
<span class='co'># automatically discarding the rest. In this example, only A1CNBR had a</span>
<span class='co'># nonzerocoefficient. Even though this variable is numeric, we can still use</span>
<span class='co'># getProcessVariablesDf using the variableLevels parameter. For examples with</span>
<span class='co'># categorical variables and additional details about getProcessVariablesDf,</span>
<span class='co'># see the examples in ?RandomForestDeployment</span>

<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.6</span>, <span class='fl'>6.0</span>, <span class='fl'>6.5</span>)))</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951        0.1591936     A1CNBR              6.4
#&gt; 2                 952        0.1482586     A1CNBR                6
#&gt; 3                 953        0.1482586     A1CNBR                6
#&gt; 4                 954        0.2095066     A1CNBR                8
#&gt; 5                 955        0.2095066     A1CNBR                8
#&gt; 6                 956        0.2095066     A1CNBR                8
#&gt; 7                 957        0.2095066     A1CNBR                8
#&gt; 8                 958        0.2095066     A1CNBR                8
#&gt; 9                 959        0.2095066     A1CNBR                8
#&gt; 10                960        0.2095066     A1CNBR                8
#&gt; 11                961        0.2095066     A1CNBR                8
#&gt; 12                962        0.2095066     A1CNBR                8
#&gt; 13                963        0.2095066     A1CNBR                8
#&gt; 14                964        0.2095066     A1CNBR                8
#&gt; 15                965        0.1191422     A1CNBR              4.8
#&gt; 16                966        0.1379515     A1CNBR              5.6
#&gt; 17                967        0.1025923     A1CNBR                4
#&gt; 18                968        0.1768097     A1CNBR                7
#&gt; 19                969        0.1538072     A1CNBR 6.20587639311044
#&gt; 20                970        0.1768097     A1CNBR                7
#&gt; 21                971        0.1768097     A1CNBR                7
#&gt; 22                972        0.1768097     A1CNBR                7
#&gt; 23                973        0.1768097     A1CNBR                7
#&gt; 24                974        0.1482586     A1CNBR                6
#&gt; 25                975        0.2095066     A1CNBR                8
#&gt; 26                976        0.1768097     A1CNBR                7
#&gt; 27                977        0.1830122     A1CNBR              7.2
#&gt; 28                978        0.2095066     A1CNBR                8
#&gt; 29                979        0.1959209     A1CNBR              7.6
#&gt; 30                980        0.1768097     A1CNBR                7
#&gt; 31                981        0.1992537     A1CNBR              7.7
#&gt; 32                982        0.2026288     A1CNBR              7.8
#&gt; 33                983        0.1893823     A1CNBR              7.4
#&gt; 34                984        0.1926305     A1CNBR              7.5
#&gt; 35                985        0.1861762     A1CNBR              7.3
#&gt; 36                986        0.1564000     A1CNBR              6.3
#&gt; 37                987        0.1404704     A1CNBR              5.7
#&gt; 38                988        0.1236256     A1CNBR                5
#&gt; 39                989        0.1282531     A1CNBR              5.2
#&gt; 40                990        0.2095066     A1CNBR                8
#&gt; 41                991        0.1564000     A1CNBR              6.3
#&gt; 42                992        0.1025923     A1CNBR                4
#&gt; 43                993        0.1768097     A1CNBR                7
#&gt; 44                994        0.1236256     A1CNBR                5
#&gt; 45                995        0.1191422     A1CNBR              4.8
#&gt; 46                996        0.1236256     A1CNBR                5
#&gt; 47                997        0.1148002     A1CNBR              4.6
#&gt; 48                998        0.1105965     A1CNBR              4.4
#&gt; 49                999        0.1126812     A1CNBR              4.5
#&gt; 50               1000        0.1025923     A1CNBR                4
#&gt;    Modify1AltValue Modify1AltPrediction Modify1Delta
#&gt; 1              5.6            0.1379515 -0.021242105
#&gt; 2              5.6            0.1379515 -0.010307109
#&gt; 3              5.6            0.1379515 -0.010307109
#&gt; 4              5.6            0.1379515 -0.071555069
#&gt; 5              5.6            0.1379515 -0.071555069
#&gt; 6              5.6            0.1379515 -0.071555069
#&gt; 7              5.6            0.1379515 -0.071555069
#&gt; 8              5.6            0.1379515 -0.071555069
#&gt; 9              5.6            0.1379515 -0.071555069
#&gt; 10             5.6            0.1379515 -0.071555069
#&gt; 11             5.6            0.1379515 -0.071555069
#&gt; 12             5.6            0.1379515 -0.071555069
#&gt; 13             5.6            0.1379515 -0.071555069
#&gt; 14             5.6            0.1379515 -0.071555069
#&gt; 15             5.6            0.1379515  0.018809293
#&gt; 16             5.6            0.1379515  0.000000000
#&gt; 17             5.6            0.1379515  0.035359205
#&gt; 18             5.6            0.1379515 -0.038858177
#&gt; 19             5.6            0.1379515 -0.015855708
#&gt; 20             5.6            0.1379515 -0.038858177
#&gt; 21             5.6            0.1379515 -0.038858177
#&gt; 22             5.6            0.1379515 -0.038858177
#&gt; 23             5.6            0.1379515 -0.038858177
#&gt; 24             5.6            0.1379515 -0.010307109
#&gt; 25             5.6            0.1379515 -0.071555069
#&gt; 26             5.6            0.1379515 -0.038858177
#&gt; 27             5.6            0.1379515 -0.045060709
#&gt; 28             5.6            0.1379515 -0.071555069
#&gt; 29             5.6            0.1379515 -0.057969380
#&gt; 30             5.6            0.1379515 -0.038858177
#&gt; 31             5.6            0.1379515 -0.061302143
#&gt; 32             5.6            0.1379515 -0.064677312
#&gt; 33             5.6            0.1379515 -0.051430769
#&gt; 34             5.6            0.1379515 -0.054678952
#&gt; 35             5.6            0.1379515 -0.048224729
#&gt; 36             5.6            0.1379515 -0.018448522
#&gt; 37             5.6            0.1379515 -0.002518929
#&gt; 38             5.6            0.1379515  0.014325942
#&gt; 39             5.6            0.1379515  0.009698445
#&gt; 40             5.6            0.1379515 -0.071555069
#&gt; 41             5.6            0.1379515 -0.018448522
#&gt; 42             5.6            0.1379515  0.035359205
#&gt; 43             5.6            0.1379515 -0.038858177
#&gt; 44             5.6            0.1379515  0.014325942
#&gt; 45             5.6            0.1379515  0.018809293
#&gt; 46             5.6            0.1379515  0.014325942
#&gt; 47             5.6            0.1379515  0.023151352
#&gt; 48             5.6            0.1379515  0.027355035
#&gt; 49             5.6            0.1379515  0.025270305
#&gt; 50             5.6            0.1379515  0.035359205</div><div class='input'>
<span class='co'># By default, the function returns recommendations for all rows, but we can </span>
<span class='co'># restrict to specific rows using the grainColumnIDs parameter</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.6</span>, <span class='fl'>6.0</span>, <span class='fl'>6.5</span>)),
                         <span class='kw'>grainColumnIDs</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>951</span>, <span class='fl'>975</span>))</div><div class='output co'>#&gt;   PatientEncounterID PredictedProbNBR Modify1TXT Modify1Current Modify1AltValue
#&gt; 1                951        0.1591936     A1CNBR            6.4             5.6
#&gt; 2                975        0.2095066     A1CNBR              8             5.6
#&gt;   Modify1AltPrediction Modify1Delta
#&gt; 1            0.1379515  -0.02124211
#&gt; 2            0.1379515  -0.07155507</div><div class='input'>
<span class='co'># The repeatedFactors parameter allows one to get multiple recommendations  </span>
<span class='co'># forthe same variable. For example, reducing A1C to 5.6 might most improve a </span>
<span class='co'># patient's risk, but reducing A1C to 5.9 is likely to also reduce the risk.</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.6</span>, <span class='fl'>5.9</span>, <span class='fl'>6.2</span>, <span class='fl'>6.5</span>)),
                         <span class='kw'>repeatedFactors</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951        0.1591936     A1CNBR              6.4
#&gt; 2                 952        0.1482586     A1CNBR                6
#&gt; 3                 953        0.1482586     A1CNBR                6
#&gt; 4                 954        0.2095066     A1CNBR                8
#&gt; 5                 955        0.2095066     A1CNBR                8
#&gt; 6                 956        0.2095066     A1CNBR                8
#&gt; 7                 957        0.2095066     A1CNBR                8
#&gt; 8                 958        0.2095066     A1CNBR                8
#&gt; 9                 959        0.2095066     A1CNBR                8
#&gt; 10                960        0.2095066     A1CNBR                8
#&gt; 11                961        0.2095066     A1CNBR                8
#&gt; 12                962        0.2095066     A1CNBR                8
#&gt; 13                963        0.2095066     A1CNBR                8
#&gt; 14                964        0.2095066     A1CNBR                8
#&gt; 15                965        0.1191422     A1CNBR              4.8
#&gt; 16                966        0.1379515     A1CNBR              5.6
#&gt; 17                967        0.1025923     A1CNBR                4
#&gt; 18                968        0.1768097     A1CNBR                7
#&gt; 19                969        0.1538072     A1CNBR 6.20587639311044
#&gt; 20                970        0.1768097     A1CNBR                7
#&gt; 21                971        0.1768097     A1CNBR                7
#&gt; 22                972        0.1768097     A1CNBR                7
#&gt; 23                973        0.1768097     A1CNBR                7
#&gt; 24                974        0.1482586     A1CNBR                6
#&gt; 25                975        0.2095066     A1CNBR                8
#&gt; 26                976        0.1768097     A1CNBR                7
#&gt; 27                977        0.1830122     A1CNBR              7.2
#&gt; 28                978        0.2095066     A1CNBR                8
#&gt; 29                979        0.1959209     A1CNBR              7.6
#&gt; 30                980        0.1768097     A1CNBR                7
#&gt; 31                981        0.1992537     A1CNBR              7.7
#&gt; 32                982        0.2026288     A1CNBR              7.8
#&gt; 33                983        0.1893823     A1CNBR              7.4
#&gt; 34                984        0.1926305     A1CNBR              7.5
#&gt; 35                985        0.1861762     A1CNBR              7.3
#&gt; 36                986        0.1564000     A1CNBR              6.3
#&gt; 37                987        0.1404704     A1CNBR              5.7
#&gt; 38                988        0.1236256     A1CNBR                5
#&gt; 39                989        0.1282531     A1CNBR              5.2
#&gt; 40                990        0.2095066     A1CNBR                8
#&gt; 41                991        0.1564000     A1CNBR              6.3
#&gt; 42                992        0.1025923     A1CNBR                4
#&gt; 43                993        0.1768097     A1CNBR                7
#&gt; 44                994        0.1236256     A1CNBR                5
#&gt; 45                995        0.1191422     A1CNBR              4.8
#&gt; 46                996        0.1236256     A1CNBR                5
#&gt; 47                997        0.1148002     A1CNBR              4.6
#&gt; 48                998        0.1105965     A1CNBR              4.4
#&gt; 49                999        0.1126812     A1CNBR              4.5
#&gt; 50               1000        0.1025923     A1CNBR                4
#&gt;    Modify1AltValue Modify1AltPrediction Modify1Delta Modify2TXT
#&gt; 1              5.6            0.1379515 -0.021242105     A1CNBR
#&gt; 2              5.6            0.1379515 -0.010307109     A1CNBR
#&gt; 3              5.6            0.1379515 -0.010307109     A1CNBR
#&gt; 4              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 5              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 6              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 7              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 8              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 9              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 10             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 11             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 12             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 13             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 14             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 15             5.6            0.1379515  0.018809293     A1CNBR
#&gt; 16             5.6            0.1379515  0.000000000     A1CNBR
#&gt; 17             5.6            0.1379515  0.035359205     A1CNBR
#&gt; 18             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 19             5.6            0.1379515 -0.015855708     A1CNBR
#&gt; 20             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 21             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 22             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 23             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 24             5.6            0.1379515 -0.010307109     A1CNBR
#&gt; 25             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 26             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 27             5.6            0.1379515 -0.045060709     A1CNBR
#&gt; 28             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 29             5.6            0.1379515 -0.057969380     A1CNBR
#&gt; 30             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 31             5.6            0.1379515 -0.061302143     A1CNBR
#&gt; 32             5.6            0.1379515 -0.064677312     A1CNBR
#&gt; 33             5.6            0.1379515 -0.051430769     A1CNBR
#&gt; 34             5.6            0.1379515 -0.054678952     A1CNBR
#&gt; 35             5.6            0.1379515 -0.048224729     A1CNBR
#&gt; 36             5.6            0.1379515 -0.018448522     A1CNBR
#&gt; 37             5.6            0.1379515 -0.002518929     A1CNBR
#&gt; 38             5.6            0.1379515  0.014325942     A1CNBR
#&gt; 39             5.6            0.1379515  0.009698445     A1CNBR
#&gt; 40             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 41             5.6            0.1379515 -0.018448522     A1CNBR
#&gt; 42             5.6            0.1379515  0.035359205     A1CNBR
#&gt; 43             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 44             5.6            0.1379515  0.014325942     A1CNBR
#&gt; 45             5.6            0.1379515  0.018809293     A1CNBR
#&gt; 46             5.6            0.1379515  0.014325942     A1CNBR
#&gt; 47             5.6            0.1379515  0.023151352     A1CNBR
#&gt; 48             5.6            0.1379515  0.027355035     A1CNBR
#&gt; 49             5.6            0.1379515  0.025270305     A1CNBR
#&gt; 50             5.6            0.1379515  0.035359205     A1CNBR
#&gt;      Modify2Current Modify2AltValue Modify2AltPrediction Modify2Delta
#&gt; 1               6.4             5.9            0.1456237 -0.013569922
#&gt; 2                 6             5.9            0.1456237 -0.002634926
#&gt; 3                 6             5.9            0.1456237 -0.002634926
#&gt; 4                 8             5.9            0.1456237 -0.063882886
#&gt; 5                 8             5.9            0.1456237 -0.063882886
#&gt; 6                 8             5.9            0.1456237 -0.063882886
#&gt; 7                 8             5.9            0.1456237 -0.063882886
#&gt; 8                 8             5.9            0.1456237 -0.063882886
#&gt; 9                 8             5.9            0.1456237 -0.063882886
#&gt; 10                8             5.9            0.1456237 -0.063882886
#&gt; 11                8             5.9            0.1456237 -0.063882886
#&gt; 12                8             5.9            0.1456237 -0.063882886
#&gt; 13                8             5.9            0.1456237 -0.063882886
#&gt; 14                8             5.9            0.1456237 -0.063882886
#&gt; 15              4.8             5.9            0.1456237  0.026481476
#&gt; 16              5.6             5.9            0.1456237  0.007672183
#&gt; 17                4             5.9            0.1456237  0.043031388
#&gt; 18                7             5.9            0.1456237 -0.031185995
#&gt; 19 6.20587639311044             5.9            0.1456237 -0.008183525
#&gt; 20                7             5.9            0.1456237 -0.031185995
#&gt; 21                7             5.9            0.1456237 -0.031185995
#&gt; 22                7             5.9            0.1456237 -0.031185995
#&gt; 23                7             5.9            0.1456237 -0.031185995
#&gt; 24                6             5.9            0.1456237 -0.002634926
#&gt; 25                8             5.9            0.1456237 -0.063882886
#&gt; 26                7             5.9            0.1456237 -0.031185995
#&gt; 27              7.2             5.9            0.1456237 -0.037388526
#&gt; 28                8             5.9            0.1456237 -0.063882886
#&gt; 29              7.6             5.9            0.1456237 -0.050297197
#&gt; 30                7             5.9            0.1456237 -0.031185995
#&gt; 31              7.7             5.9            0.1456237 -0.053629960
#&gt; 32              7.8             5.9            0.1456237 -0.057005129
#&gt; 33              7.4             5.9            0.1456237 -0.043758586
#&gt; 34              7.5             5.9            0.1456237 -0.047006769
#&gt; 35              7.3             5.9            0.1456237 -0.040552546
#&gt; 36              6.3             5.9            0.1456237 -0.010776340
#&gt; 37              5.7             5.9            0.1456237  0.005153254
#&gt; 38                5             5.9            0.1456237  0.021998125
#&gt; 39              5.2             5.9            0.1456237  0.017370628
#&gt; 40                8             5.9            0.1456237 -0.063882886
#&gt; 41              6.3             5.9            0.1456237 -0.010776340
#&gt; 42                4             5.9            0.1456237  0.043031388
#&gt; 43                7             5.9            0.1456237 -0.031185995
#&gt; 44                5             5.9            0.1456237  0.021998125
#&gt; 45              4.8             5.9            0.1456237  0.026481476
#&gt; 46                5             5.9            0.1456237  0.021998125
#&gt; 47              4.6             5.9            0.1456237  0.030823534
#&gt; 48              4.4             5.9            0.1456237  0.035027218
#&gt; 49              4.5             5.9            0.1456237  0.032942488
#&gt; 50                4             5.9            0.1456237  0.043031388
#&gt;    Modify3TXT   Modify3Current Modify3AltValue Modify3AltPrediction
#&gt; 1      A1CNBR              6.4             6.2            0.1536465
#&gt; 2      A1CNBR                6             6.2            0.1536465
#&gt; 3      A1CNBR                6             6.2            0.1536465
#&gt; 4      A1CNBR                8             6.2            0.1536465
#&gt; 5      A1CNBR                8             6.2            0.1536465
#&gt; 6      A1CNBR                8             6.2            0.1536465
#&gt; 7      A1CNBR                8             6.2            0.1536465
#&gt; 8      A1CNBR                8             6.2            0.1536465
#&gt; 9      A1CNBR                8             6.2            0.1536465
#&gt; 10     A1CNBR                8             6.2            0.1536465
#&gt; 11     A1CNBR                8             6.2            0.1536465
#&gt; 12     A1CNBR                8             6.2            0.1536465
#&gt; 13     A1CNBR                8             6.2            0.1536465
#&gt; 14     A1CNBR                8             6.2            0.1536465
#&gt; 15     A1CNBR              4.8             6.2            0.1536465
#&gt; 16     A1CNBR              5.6             6.2            0.1536465
#&gt; 17     A1CNBR                4             6.2            0.1536465
#&gt; 18     A1CNBR                7             6.2            0.1536465
#&gt; 19     A1CNBR 6.20587639311044             6.2            0.1536465
#&gt; 20     A1CNBR                7             6.2            0.1536465
#&gt; 21     A1CNBR                7             6.2            0.1536465
#&gt; 22     A1CNBR                7             6.2            0.1536465
#&gt; 23     A1CNBR                7             6.2            0.1536465
#&gt; 24     A1CNBR                6             6.2            0.1536465
#&gt; 25     A1CNBR                8             6.2            0.1536465
#&gt; 26     A1CNBR                7             6.2            0.1536465
#&gt; 27     A1CNBR              7.2             6.2            0.1536465
#&gt; 28     A1CNBR                8             6.2            0.1536465
#&gt; 29     A1CNBR              7.6             6.2            0.1536465
#&gt; 30     A1CNBR                7             6.2            0.1536465
#&gt; 31     A1CNBR              7.7             6.2            0.1536465
#&gt; 32     A1CNBR              7.8             6.2            0.1536465
#&gt; 33     A1CNBR              7.4             6.2            0.1536465
#&gt; 34     A1CNBR              7.5             6.2            0.1536465
#&gt; 35     A1CNBR              7.3             6.2            0.1536465
#&gt; 36     A1CNBR              6.3             6.2            0.1536465
#&gt; 37     A1CNBR              5.7             6.2            0.1536465
#&gt; 38     A1CNBR                5             6.2            0.1536465
#&gt; 39     A1CNBR              5.2             6.2            0.1536465
#&gt; 40     A1CNBR                8             6.2            0.1536465
#&gt; 41     A1CNBR              6.3             6.2            0.1536465
#&gt; 42     A1CNBR                4             6.2            0.1536465
#&gt; 43     A1CNBR                7             6.2            0.1536465
#&gt; 44     A1CNBR                5             6.2            0.1536465
#&gt; 45     A1CNBR              4.8             6.2            0.1536465
#&gt; 46     A1CNBR                5             6.2            0.1536465
#&gt; 47     A1CNBR              4.6             6.2            0.1536465
#&gt; 48     A1CNBR              4.4             6.2            0.1536465
#&gt; 49     A1CNBR              4.5             6.2            0.1536465
#&gt; 50     A1CNBR                4             6.2            0.1536465
#&gt;     Modify3Delta
#&gt; 1  -0.0055471011
#&gt; 2   0.0053878948
#&gt; 3   0.0053878948
#&gt; 4  -0.0558600650
#&gt; 5  -0.0558600650
#&gt; 6  -0.0558600650
#&gt; 7  -0.0558600650
#&gt; 8  -0.0558600650
#&gt; 9  -0.0558600650
#&gt; 10 -0.0558600650
#&gt; 11 -0.0558600650
#&gt; 12 -0.0558600650
#&gt; 13 -0.0558600650
#&gt; 14 -0.0558600650
#&gt; 15  0.0345042972
#&gt; 16  0.0156950041
#&gt; 17  0.0510542093
#&gt; 18 -0.0231631733
#&gt; 19 -0.0001607042
#&gt; 20 -0.0231631733
#&gt; 21 -0.0231631733
#&gt; 22 -0.0231631733
#&gt; 23 -0.0231631733
#&gt; 24  0.0053878948
#&gt; 25 -0.0558600650
#&gt; 26 -0.0231631733
#&gt; 27 -0.0293657049
#&gt; 28 -0.0558600650
#&gt; 29 -0.0422743759
#&gt; 30 -0.0231631733
#&gt; 31 -0.0456071388
#&gt; 32 -0.0489823078
#&gt; 33 -0.0357357652
#&gt; 34 -0.0389839475
#&gt; 35 -0.0325297244
#&gt; 36 -0.0027535183
#&gt; 37  0.0131760748
#&gt; 38  0.0300209461
#&gt; 39  0.0253934495
#&gt; 40 -0.0558600650
#&gt; 41 -0.0027535183
#&gt; 42  0.0510542093
#&gt; 43 -0.0231631733
#&gt; 44  0.0300209461
#&gt; 45  0.0345042972
#&gt; 46  0.0300209461
#&gt; 47  0.0388463556
#&gt; 48  0.0430500390
#&gt; 49  0.0409653096
#&gt; 50  0.0510542093</div><div class='input'>
<span class='co'># The numTopFactors parameter allows one to set the maximum number of </span>
<span class='co'># recommendations to display (with the default being 3)</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.6</span>, <span class='fl'>5.9</span>, <span class='fl'>6.2</span>, <span class='fl'>6.5</span>)),
                         <span class='kw'>repeatedFactors</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                         <span class='kw'>numTopFactors</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951        0.1591936     A1CNBR              6.4
#&gt; 2                 952        0.1482586     A1CNBR                6
#&gt; 3                 953        0.1482586     A1CNBR                6
#&gt; 4                 954        0.2095066     A1CNBR                8
#&gt; 5                 955        0.2095066     A1CNBR                8
#&gt; 6                 956        0.2095066     A1CNBR                8
#&gt; 7                 957        0.2095066     A1CNBR                8
#&gt; 8                 958        0.2095066     A1CNBR                8
#&gt; 9                 959        0.2095066     A1CNBR                8
#&gt; 10                960        0.2095066     A1CNBR                8
#&gt; 11                961        0.2095066     A1CNBR                8
#&gt; 12                962        0.2095066     A1CNBR                8
#&gt; 13                963        0.2095066     A1CNBR                8
#&gt; 14                964        0.2095066     A1CNBR                8
#&gt; 15                965        0.1191422     A1CNBR              4.8
#&gt; 16                966        0.1379515     A1CNBR              5.6
#&gt; 17                967        0.1025923     A1CNBR                4
#&gt; 18                968        0.1768097     A1CNBR                7
#&gt; 19                969        0.1538072     A1CNBR 6.20587639311044
#&gt; 20                970        0.1768097     A1CNBR                7
#&gt; 21                971        0.1768097     A1CNBR                7
#&gt; 22                972        0.1768097     A1CNBR                7
#&gt; 23                973        0.1768097     A1CNBR                7
#&gt; 24                974        0.1482586     A1CNBR                6
#&gt; 25                975        0.2095066     A1CNBR                8
#&gt; 26                976        0.1768097     A1CNBR                7
#&gt; 27                977        0.1830122     A1CNBR              7.2
#&gt; 28                978        0.2095066     A1CNBR                8
#&gt; 29                979        0.1959209     A1CNBR              7.6
#&gt; 30                980        0.1768097     A1CNBR                7
#&gt; 31                981        0.1992537     A1CNBR              7.7
#&gt; 32                982        0.2026288     A1CNBR              7.8
#&gt; 33                983        0.1893823     A1CNBR              7.4
#&gt; 34                984        0.1926305     A1CNBR              7.5
#&gt; 35                985        0.1861762     A1CNBR              7.3
#&gt; 36                986        0.1564000     A1CNBR              6.3
#&gt; 37                987        0.1404704     A1CNBR              5.7
#&gt; 38                988        0.1236256     A1CNBR                5
#&gt; 39                989        0.1282531     A1CNBR              5.2
#&gt; 40                990        0.2095066     A1CNBR                8
#&gt; 41                991        0.1564000     A1CNBR              6.3
#&gt; 42                992        0.1025923     A1CNBR                4
#&gt; 43                993        0.1768097     A1CNBR                7
#&gt; 44                994        0.1236256     A1CNBR                5
#&gt; 45                995        0.1191422     A1CNBR              4.8
#&gt; 46                996        0.1236256     A1CNBR                5
#&gt; 47                997        0.1148002     A1CNBR              4.6
#&gt; 48                998        0.1105965     A1CNBR              4.4
#&gt; 49                999        0.1126812     A1CNBR              4.5
#&gt; 50               1000        0.1025923     A1CNBR                4
#&gt;    Modify1AltValue Modify1AltPrediction Modify1Delta Modify2TXT
#&gt; 1              5.6            0.1379515 -0.021242105     A1CNBR
#&gt; 2              5.6            0.1379515 -0.010307109     A1CNBR
#&gt; 3              5.6            0.1379515 -0.010307109     A1CNBR
#&gt; 4              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 5              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 6              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 7              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 8              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 9              5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 10             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 11             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 12             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 13             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 14             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 15             5.6            0.1379515  0.018809293     A1CNBR
#&gt; 16             5.6            0.1379515  0.000000000     A1CNBR
#&gt; 17             5.6            0.1379515  0.035359205     A1CNBR
#&gt; 18             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 19             5.6            0.1379515 -0.015855708     A1CNBR
#&gt; 20             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 21             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 22             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 23             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 24             5.6            0.1379515 -0.010307109     A1CNBR
#&gt; 25             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 26             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 27             5.6            0.1379515 -0.045060709     A1CNBR
#&gt; 28             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 29             5.6            0.1379515 -0.057969380     A1CNBR
#&gt; 30             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 31             5.6            0.1379515 -0.061302143     A1CNBR
#&gt; 32             5.6            0.1379515 -0.064677312     A1CNBR
#&gt; 33             5.6            0.1379515 -0.051430769     A1CNBR
#&gt; 34             5.6            0.1379515 -0.054678952     A1CNBR
#&gt; 35             5.6            0.1379515 -0.048224729     A1CNBR
#&gt; 36             5.6            0.1379515 -0.018448522     A1CNBR
#&gt; 37             5.6            0.1379515 -0.002518929     A1CNBR
#&gt; 38             5.6            0.1379515  0.014325942     A1CNBR
#&gt; 39             5.6            0.1379515  0.009698445     A1CNBR
#&gt; 40             5.6            0.1379515 -0.071555069     A1CNBR
#&gt; 41             5.6            0.1379515 -0.018448522     A1CNBR
#&gt; 42             5.6            0.1379515  0.035359205     A1CNBR
#&gt; 43             5.6            0.1379515 -0.038858177     A1CNBR
#&gt; 44             5.6            0.1379515  0.014325942     A1CNBR
#&gt; 45             5.6            0.1379515  0.018809293     A1CNBR
#&gt; 46             5.6            0.1379515  0.014325942     A1CNBR
#&gt; 47             5.6            0.1379515  0.023151352     A1CNBR
#&gt; 48             5.6            0.1379515  0.027355035     A1CNBR
#&gt; 49             5.6            0.1379515  0.025270305     A1CNBR
#&gt; 50             5.6            0.1379515  0.035359205     A1CNBR
#&gt;      Modify2Current Modify2AltValue Modify2AltPrediction Modify2Delta
#&gt; 1               6.4             5.9            0.1456237 -0.013569922
#&gt; 2                 6             5.9            0.1456237 -0.002634926
#&gt; 3                 6             5.9            0.1456237 -0.002634926
#&gt; 4                 8             5.9            0.1456237 -0.063882886
#&gt; 5                 8             5.9            0.1456237 -0.063882886
#&gt; 6                 8             5.9            0.1456237 -0.063882886
#&gt; 7                 8             5.9            0.1456237 -0.063882886
#&gt; 8                 8             5.9            0.1456237 -0.063882886
#&gt; 9                 8             5.9            0.1456237 -0.063882886
#&gt; 10                8             5.9            0.1456237 -0.063882886
#&gt; 11                8             5.9            0.1456237 -0.063882886
#&gt; 12                8             5.9            0.1456237 -0.063882886
#&gt; 13                8             5.9            0.1456237 -0.063882886
#&gt; 14                8             5.9            0.1456237 -0.063882886
#&gt; 15              4.8             5.9            0.1456237  0.026481476
#&gt; 16              5.6             5.9            0.1456237  0.007672183
#&gt; 17                4             5.9            0.1456237  0.043031388
#&gt; 18                7             5.9            0.1456237 -0.031185995
#&gt; 19 6.20587639311044             5.9            0.1456237 -0.008183525
#&gt; 20                7             5.9            0.1456237 -0.031185995
#&gt; 21                7             5.9            0.1456237 -0.031185995
#&gt; 22                7             5.9            0.1456237 -0.031185995
#&gt; 23                7             5.9            0.1456237 -0.031185995
#&gt; 24                6             5.9            0.1456237 -0.002634926
#&gt; 25                8             5.9            0.1456237 -0.063882886
#&gt; 26                7             5.9            0.1456237 -0.031185995
#&gt; 27              7.2             5.9            0.1456237 -0.037388526
#&gt; 28                8             5.9            0.1456237 -0.063882886
#&gt; 29              7.6             5.9            0.1456237 -0.050297197
#&gt; 30                7             5.9            0.1456237 -0.031185995
#&gt; 31              7.7             5.9            0.1456237 -0.053629960
#&gt; 32              7.8             5.9            0.1456237 -0.057005129
#&gt; 33              7.4             5.9            0.1456237 -0.043758586
#&gt; 34              7.5             5.9            0.1456237 -0.047006769
#&gt; 35              7.3             5.9            0.1456237 -0.040552546
#&gt; 36              6.3             5.9            0.1456237 -0.010776340
#&gt; 37              5.7             5.9            0.1456237  0.005153254
#&gt; 38                5             5.9            0.1456237  0.021998125
#&gt; 39              5.2             5.9            0.1456237  0.017370628
#&gt; 40                8             5.9            0.1456237 -0.063882886
#&gt; 41              6.3             5.9            0.1456237 -0.010776340
#&gt; 42                4             5.9            0.1456237  0.043031388
#&gt; 43                7             5.9            0.1456237 -0.031185995
#&gt; 44                5             5.9            0.1456237  0.021998125
#&gt; 45              4.8             5.9            0.1456237  0.026481476
#&gt; 46                5             5.9            0.1456237  0.021998125
#&gt; 47              4.6             5.9            0.1456237  0.030823534
#&gt; 48              4.4             5.9            0.1456237  0.035027218
#&gt; 49              4.5             5.9            0.1456237  0.032942488
#&gt; 50                4             5.9            0.1456237  0.043031388</div><div class='input'>
<span class='co'># If we want to make recommendations for increasing the probability (not</span>
<span class='co'># likely in the case of readmissions), we can do so using the smallerBetter</span>
<span class='co'># parameter. (Here, all the deltas will be non-negative, corresponding to an </span>
<span class='co'># increased risk)</span>
<span class='no'>dL</span>$<span class='fu'>getProcessVariablesDf</span>(<span class='kw'>modifiableVariables</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"A1CNBR"</span>),
                         <span class='kw'>variableLevels</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>A1CNBR</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5.6</span>, <span class='fl'>6.0</span>, <span class='fl'>6.5</span>)),
                         <span class='kw'>smallerBetter</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;    PatientEncounterID PredictedProbNBR Modify1TXT   Modify1Current
#&gt; 1                 951        0.1591936     A1CNBR              6.4
#&gt; 2                 952        0.1482586     A1CNBR                6
#&gt; 3                 953        0.1482586     A1CNBR                6
#&gt; 4                 954        0.2095066     A1CNBR                8
#&gt; 5                 955        0.2095066     A1CNBR                8
#&gt; 6                 956        0.2095066     A1CNBR                8
#&gt; 7                 957        0.2095066     A1CNBR                8
#&gt; 8                 958        0.2095066     A1CNBR                8
#&gt; 9                 959        0.2095066     A1CNBR                8
#&gt; 10                960        0.2095066     A1CNBR                8
#&gt; 11                961        0.2095066     A1CNBR                8
#&gt; 12                962        0.2095066     A1CNBR                8
#&gt; 13                963        0.2095066     A1CNBR                8
#&gt; 14                964        0.2095066     A1CNBR                8
#&gt; 15                965        0.1191422     A1CNBR              4.8
#&gt; 16                966        0.1379515     A1CNBR              5.6
#&gt; 17                967        0.1025923     A1CNBR                4
#&gt; 18                968        0.1768097     A1CNBR                7
#&gt; 19                969        0.1538072     A1CNBR 6.20587639311044
#&gt; 20                970        0.1768097     A1CNBR                7
#&gt; 21                971        0.1768097     A1CNBR                7
#&gt; 22                972        0.1768097     A1CNBR                7
#&gt; 23                973        0.1768097     A1CNBR                7
#&gt; 24                974        0.1482586     A1CNBR                6
#&gt; 25                975        0.2095066     A1CNBR                8
#&gt; 26                976        0.1768097     A1CNBR                7
#&gt; 27                977        0.1830122     A1CNBR              7.2
#&gt; 28                978        0.2095066     A1CNBR                8
#&gt; 29                979        0.1959209     A1CNBR              7.6
#&gt; 30                980        0.1768097     A1CNBR                7
#&gt; 31                981        0.1992537     A1CNBR              7.7
#&gt; 32                982        0.2026288     A1CNBR              7.8
#&gt; 33                983        0.1893823     A1CNBR              7.4
#&gt; 34                984        0.1926305     A1CNBR              7.5
#&gt; 35                985        0.1861762     A1CNBR              7.3
#&gt; 36                986        0.1564000     A1CNBR              6.3
#&gt; 37                987        0.1404704     A1CNBR              5.7
#&gt; 38                988        0.1236256     A1CNBR                5
#&gt; 39                989        0.1282531     A1CNBR              5.2
#&gt; 40                990        0.2095066     A1CNBR                8
#&gt; 41                991        0.1564000     A1CNBR              6.3
#&gt; 42                992        0.1025923     A1CNBR                4
#&gt; 43                993        0.1768097     A1CNBR                7
#&gt; 44                994        0.1236256     A1CNBR                5
#&gt; 45                995        0.1191422     A1CNBR              4.8
#&gt; 46                996        0.1236256     A1CNBR                5
#&gt; 47                997        0.1148002     A1CNBR              4.6
#&gt; 48                998        0.1105965     A1CNBR              4.4
#&gt; 49                999        0.1126812     A1CNBR              4.5
#&gt; 50               1000        0.1025923     A1CNBR                4
#&gt;    Modify1AltValue Modify1AltPrediction Modify1Delta
#&gt; 1              6.5            0.1620275  0.002833897
#&gt; 2              6.5            0.1620275  0.013768893
#&gt; 3              6.5            0.1620275  0.013768893
#&gt; 4              6.5            0.1620275 -0.047479067
#&gt; 5              6.5            0.1620275 -0.047479067
#&gt; 6              6.5            0.1620275 -0.047479067
#&gt; 7              6.5            0.1620275 -0.047479067
#&gt; 8              6.5            0.1620275 -0.047479067
#&gt; 9              6.5            0.1620275 -0.047479067
#&gt; 10             6.5            0.1620275 -0.047479067
#&gt; 11             6.5            0.1620275 -0.047479067
#&gt; 12             6.5            0.1620275 -0.047479067
#&gt; 13             6.5            0.1620275 -0.047479067
#&gt; 14             6.5            0.1620275 -0.047479067
#&gt; 15             6.5            0.1620275  0.042885296
#&gt; 16             6.5            0.1620275  0.024076003
#&gt; 17             6.5            0.1620275  0.059435208
#&gt; 18             6.5            0.1620275 -0.014782175
#&gt; 19             6.5            0.1620275  0.008220294
#&gt; 20             6.5            0.1620275 -0.014782175
#&gt; 21             6.5            0.1620275 -0.014782175
#&gt; 22             6.5            0.1620275 -0.014782175
#&gt; 23             6.5            0.1620275 -0.014782175
#&gt; 24             6.5            0.1620275  0.013768893
#&gt; 25             6.5            0.1620275 -0.047479067
#&gt; 26             6.5            0.1620275 -0.014782175
#&gt; 27             6.5            0.1620275 -0.020984706
#&gt; 28             6.5            0.1620275 -0.047479067
#&gt; 29             6.5            0.1620275 -0.033893377
#&gt; 30             6.5            0.1620275 -0.014782175
#&gt; 31             6.5            0.1620275 -0.037226140
#&gt; 32             6.5            0.1620275 -0.040601309
#&gt; 33             6.5            0.1620275 -0.027354767
#&gt; 34             6.5            0.1620275 -0.030602949
#&gt; 35             6.5            0.1620275 -0.024148726
#&gt; 36             6.5            0.1620275  0.005627480
#&gt; 37             6.5            0.1620275  0.021557073
#&gt; 38             6.5            0.1620275  0.038401945
#&gt; 39             6.5            0.1620275  0.033774448
#&gt; 40             6.5            0.1620275 -0.047479067
#&gt; 41             6.5            0.1620275  0.005627480
#&gt; 42             6.5            0.1620275  0.059435208
#&gt; 43             6.5            0.1620275 -0.014782175
#&gt; 44             6.5            0.1620275  0.038401945
#&gt; 45             6.5            0.1620275  0.042885296
#&gt; 46             6.5            0.1620275  0.038401945
#&gt; 47             6.5            0.1620275  0.047227354
#&gt; 48             6.5            0.1620275  0.051431037
#&gt; 49             6.5            0.1620275  0.049346308
#&gt; 50             6.5            0.1620275  0.059435208</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#format">Format</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#-code-new-code-">&lt;code&gt;$new()&lt;/code&gt;</a></li>

      <li><a href="#-code-deploy-code-">&lt;code&gt;$deploy()&lt;/code&gt;</a></li>

      <li><a href="#-code-gettopfactors-code-">&lt;code&gt;$getTopFactors()&lt;/code&gt;</a></li>

      <li><a href="#-code-getoutdf-code-">&lt;code&gt;$getOutDf()&lt;/code&gt;</a></li>

      <li><a href="#-code-performnewpredictions-code-">&lt;code&gt;$performNewPredictions()&lt;/code&gt;</a></li>

      <li><a href="#-code-getprocessvariablesdf-code-">&lt;code&gt;$getProcessVariablesDf()&lt;/code&gt;</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Levi Thatcher, Mike Mastanduno, Michael Levy, Taylor Miller, Taylor Larsen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
